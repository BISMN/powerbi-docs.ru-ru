---
title: Руководство. Построить модель машинного обучения в Power BI (Предварительная версия)
description: В этом руководстве вы построить модель машинного обучения в Power BI.
author: davidiseminger
manager: kfile
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-service
ms.custom: connect-to-services
ms.topic: tutorial
ms.date: 03/29/2019
ms.author: davidi
LocalizationGroup: Connect to services
ms.openlocfilehash: 611d6f6c923e6cb68af94840c4266a0b6dee7651
ms.sourcegitcommit: 60dad5aa0d85db790553e537bf8ac34ee3289ba3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/29/2019
ms.locfileid: "61407197"
---
# <a name="tutorial-build-a-machine-learning-model-in-power-bi-preview"></a>Руководство. Построить модель машинного обучения в Power BI (Предварительная версия)

В этом руководстве используется **автоматической машинного обучения** для создания и применения двоичный Прогноз модели в Power BI. Учебник включает руководство по созданию поток данных Power BI и использование сущностей, определенных в потоке данных для обучения и проверки модели непосредственно в Power BI машинного обучения. Затем мы используем эту модель для оценки для создания прогнозов.

Во-первых вы создадите двоичный Прогноз модели машинного обучения, для прогнозирования покупки цель online покупателей на основе набора атрибутов, интерактивного сеанса. Набор данных обучения машины теста производительности используется для этого упражнения. После обучения модели Power BI автоматически создаст отчет о проверке, объясняя результатов модели. Затем можно просмотреть отчет о проверке и применить модель к данным для оценки.

Этот учебник включает следующие действия:

> [!div class="checklist"]
> * Создать поток данных с входными данными
> * Создайте и выполните Обучение модели машинного обучения
> * Просмотрите отчет о проверке модели
> * Применить модель к сущности потока данных
> * С помощью результата оценки из модели в отчете Power BI

## <a name="create-a-dataflow-with-the-input-data"></a>Создать поток данных с входными данными

В первой части этого руководства — создать поток данных с входными данными. Этот процесс состоит из нескольких шагов, как показано в следующих разделах, начиная с получения данных.

### <a name="get-data"></a>Получить данные

Первым шагом создания потока данных будет иметь источники данных готовы. В нашем случае мы используем набор данных машинного обучения на основе набора онлайн-сеансов, некоторые из которых culminated в покупку. Набор данных содержит набор атрибутов об этих сеансах, которые мы будем использовать для обучения модели.

Набор данных можно загрузить с веб-сайта UC Irvine.  У нас также есть этом доступны в рамках этого руководства, по следующей ссылке: [online_shoppers_intention.csv](https://raw.githubusercontent.com/santoshc1/PowerBI-AI-samples/master/Tutorial_AutomatedML/online_shoppers_intention.csv).

### <a name="create-the-entities"></a>Создать сущности

Чтобы создать сущности в потоке данных, войдите в службу Power BI и перейдите в вашей выделенной емкости к рабочей области, в которой включена предварительная версия функции ИИ.

Если у вас нет рабочей области, можно создать его, выбрав **рабочие области** в левом меню навигации в службе Power BI и выберите **создать рабочую область приложения** в нижней части панели, отображается. Откроется панель справа, чтобы ввести сведения о рабочей области. Введите имя рабочей области и выберите **Дополнительно**. Убедитесь, что рабочая область использует выделенными ресурсами с помощью переключателя и что он назначен экземпляр выделенной емкости, который имеет AI предварительной версии, включен. Затем выберите **Сохранить**.

![Создание рабочей области](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-01.png)

После создания рабочей области, можно выбрать **Skip** в нижнем правом углу экрана приветствия, как показано на следующем рисунке.

![Пропустить, если у вас есть рабочая область](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-02.png)

Выберите **потоков данных (Предварительная версия)** вкладки. Выберите **создать** кнопку в верхней правой части рабочей области, а затем выберите **потока данных**.

![Создание потока данных](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-03.png)

Выберите **Добавить новые сущности**. Это откроет **Power Query** редактора в браузере.

![Добавление новой сущности](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-04.png)

Выберите **Text/CSV-файл** как источник данных, показано на следующем рисунке.

![Выбранный текст/CSF-файл](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-05.png)

В **соединение с источником данных** , отображаемый рядом, вставьте следующую ссылку, чтобы *online_shoppers_intention.csv* в **путь к файлу или URL-адрес** поле, а затем выберите  **Далее**.

`https://raw.githubusercontent.com/santoshc1/PowerBI-AI-samples/master/Tutorial_AutomatedML/online_shoppers_intention.csv`

![Путь к файлу](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-06.png)

Редактор запросов Power отображается предварительный просмотр данных из CSV-файла. Выберите **преобразования таблицы** на ленте команду и затем выберите **использовать первую строку как заголовки** в появившемся меню. Это добавляет _распространяемых заголовки_ запроса шаг с заходом **примененные действия** раздел в правой части экрана. Можно переименовать запрос более понятное имя, изменив значение в **имя** найти поле в области справа. Например, можно изменить имя запроса, чтобы _Online посетителя_.

![Измените понятное имя](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-07.png)

Ниже приведены некоторые из типов данных атрибутов в этом наборе данных _числовых_ или _логическое_, хотя они могут интерпретироваться как строки, **Power Query**. Выберите значок типа атрибута в верхней части каждого заголовка столбца, чтобы изменить столбцы, перечисленные ниже, для следующих типов:

* **Десятичное число:** Administrative_Duration; Informational_Duration; ProductRelated_Duration; BounceRates; ExitRates; PageValues; SpecialDay
* **Значение true или False:** Выходные дни; Доход

![Изменение типа данных](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-08.png)

**Двоичный прогноз** мы обучим модель требуется логическое поле в качестве метки, определение результатов прошлых наблюдений. В этом наборе данных _доход_ атрибут указывает на покупку, и этот атрибут уже доступны в виде логического значения. Таким образом нам не нужно добавить вычисляемый столбец для метки. В других наборах данных может потребоваться преобразовать существующие атрибуты метки в столбец логических значений.

Выберите **сделать** кнопку, чтобы закрыть редактор Power Query. Отобразится список сущностей с _Online посетителей_ данных, мы добавили. Выберите **Сохранить** в правом верхнем углу, укажите имя для потока данных и выберите **Сохранить** в диалоговом окне, как показано на следующем рисунке.

![Сохранить поток данных](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-09.png)

### <a name="refresh-the-dataflow"></a>Обновление потока данных

Сохранение результатов потока данных в уведомление отображается о том, что был сохранен потока данных. Выберите **Обновить сейчас** прием данных из источника в потоке данных.

![Обновить сейчас](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-10.png)

Нажмите **Закрыть** в верхнем углу справа и дождитесь, пока завершится обновление потока данных.

Вы также можете обновить потока данных с помощью **действия** команды. Поток данных показывает метку времени, после завершения обновления.

![Отметка времени обновления](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-11.png)

## <a name="create-and-train-a-machine-learning-model"></a>Создайте и выполните Обучение модели машинного обучения

Выберите поток данных, после завершения обновления. Чтобы добавить модель машинного обучения, выберите **модель машинного Обучения, применить** кнопку в **действия** для базовой сущности с информацией об обучающих данных и метки, а затем выберите **добавить модель машинного обучения**.

![Добавить модель машинного обучения](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-12.png)

Первым шагом для создания нашей модели машинного обучения является определяйте исторические данные, включая поле метки, необходимо создать прогноз. Модель создается путем обучения на основе этих данных.

В случае набора данных, мы используем, это **доход** поля. Выберите **доход** как значение «исторические результат field» и выберите **Далее**.

![Выберите данные журнала](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-13.png)

Далее мы необходимо выбрать тип модели для создания машинного обучения. Power BI анализирует значения в поле журнала результат, когда вы определили и предлагают типов моделей машинного обучения, которые могут быть созданы для прогнозирования этого поля.

В этом случае, так как мы прогнозируется двоичный результат из ли пользователь будет совершить покупку, или нет, выберите **двоичный прогноз** для типа модели и затем выбрать рядом.

![Выбран двоичный прогноз](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-14.png)

После этого Power BI просматривает предварительные данные и предлагает входные данные, которые может использовать модели. У вас есть возможность настраивать поля, используемые для модели. В наш проверенный набор данных чтобы выбрать все поля, установите флажок рядом с именем сущности. Выберите **Далее** принимать входные данные.

![Установите флажок, далее](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-15.png)

На последнем шаге необходимо предоставить имя для нашей модели, а также понятные метки для выходных данных для использования в автоматически созданном отчете, будут использованы Помесячные результаты проверки модели. Далее нам нужно имя модели _прогноза покупки намерение_и метки true и false в виде _покупки_ и _Purchase нет_. Затем выберите **Сохранить**.

![Сохранение модели](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-16.png)

Нашей модели машинного обучения теперь готов для обучения. Выберите **Обновить сейчас** для запуска, обучения модели.

![Обновить сейчас](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-17.png)

Начнется процесс обучения, выборки и нормализация исторических данных и разделения набора данных на две новые сущности *покупки намерение прогнозирования обучающих данных* и *тестирование прогноза покупки намерение Данные*.

В зависимости от размера набора данных в процессе обучения может занять от нескольких минут до нескольких часов. На этом этапе см. в модели **модели машинного обучения** вкладке потока данных. _Готовы_ состояние указывает, находится в очереди для обучения или выполняется Обучение модели.

![Все готово для обучения](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-18.png)

Несмотря на то обучения модели, будет возможность просмотреть или изменить поток данных. Можно подтвердить, что модель обучена и проверяются с помощью состояние потока данных. Он отображается как обновление данных выполняется в **потоки данных** вкладку рабочей области.

![В процессе](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-19.png)

После завершения обучения модели, поток данных отображает на время обновления. Убедитесь, что эта модель обучается, перейдя по адресу **модели машинного обучения** вкладку в потоке данных. Созданная модель должен показывать состояние как **Trained** и **последнего обученной** времени теперь должен быть обновлен.

![Дата последнего, обученные на основе](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-20.png)

## <a name="review-the-model-validation-report"></a>Просмотрите отчет о проверке модели

Чтобы просмотреть отчет о проверке модели, в **моделей машинного обучения, s** выбрать **просмотреть отчет о производительности, а затем применить модель** кнопку **действия** столбцом для модели . В этом отчете описывается, как ваша модель машинного обучения, вероятно будет работать.

В **эффективности модели** страницу отчета, выберите **ключевых факторов влияния** Просмотр верхней предиктора для модели. Можно выбрать один из предикторов, чтобы увидеть, как распределение результат, связанный с этой прогнозирования.

![Модель производительности](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-21.png)

Можно использовать **порог вероятности** среза на странице эффективности модели для проверки его влияния на точность и полноту для модели.

![Порог вероятности](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-22.png)

Другие страницы отчета описывают статистические производительности для модели.

Отчет также содержит страницу подробностей обучения, которая описывает различные итерации, которые выполнялись, как функции были извлечены из входных данных и гиперпараметров для окончательной модели, используемой.

## <a name="apply-the-model-to-a-dataflow-entity"></a>Применить модель к сущности потока данных

Выберите **применить модель** кнопку в верхней части отчета для вызова этой модели, при обновлении потока данных. В **применить** диалоговом окне можно указать целевую сущность, содержатся исходные данные, к которому требуется применить модель.

![Применить модель](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-23.png)

При появлении необходимо **обновить** потока данных для предварительного просмотра результатов модели.

Применение модели создаст новую сущность, с суффиксом **насыщенные < model_name >** добавляется к сущности, к которому применен модели. В нашем случае применение модели для **OnlineShoppers** сущности будет создан **OnlineShoppers насыщенные прогноза покупки намерение**, включающий прогнозируемые выходные данные из модели.

Применение модели двоичный прогноз добавляет три столбца с прогнозируемый результат оценки вероятности и самых важных факторов записи для прогноза, с указанным именем столбца отдельными префиксами.

![Три столбца результата](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-24.png)

Из-за известной проблемы Оцененный выходные столбцы в Обогащенные сущности будут доступны только в Power BI Desktop. Для предварительного просмотра в службе, необходимо использовать специальный анонс сущности.

После завершения обновления потока данных, можно выбрать **OnlineShoppers насыщенные Preview прогноза покупки намерение** сущности, чтобы просмотреть результаты.

![Просмотр результатов](media/service-tutorial-build-machine-learning-model/tutorial-build-machine-learning-model-25.png)

## <a name="using-the-scored-output-from-the-model-in-a-power-bi-report"></a>С помощью результата оценки из модели в отчете Power BI

Чтобы использовать выходные данные оцененную модель машинного обучения, вы может подключиться к потока данных из Power BI desktop, с помощью соединителя потоки данных. **OnlineShoppers насыщенные прогноза покупки намерение** сущности теперь может использоваться для включения прогнозы из модели в отчетах Power BI.

## <a name="next-steps"></a>Дальнейшие действия

В этом руководстве вы создали и применили двоичный Прогноз модели в Power BI, выполнив следующие действия:

* Создать поток данных с входными данными
* Создайте и выполните Обучение модели машинного обучения
* Просмотрите отчет о проверке модели
* Применить модель к сущности потока данных
* С помощью результата оценки из модели в отчете Power BI

Дополнительные сведения об автоматизации машинного обучения в Power BI, см. в разделе [автоматической машинного обучения в Power BI (Предварительная версия)](service-machine-learning-automated.md).
