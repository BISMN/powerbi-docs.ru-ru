---
title: Добавление в отчет фильтра в представлении редактирования
description: Добавление фильтра страницы, визуализации или отчета в отчет в Power BI
author: maggiesMSFT
manager: kfile
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-service
ms.topic: conceptual
ms.date: 05/22/2019
ms.author: maggies
LocalizationGroup: Reports
ms.openlocfilehash: 3666335394222d32bc13ce86d8d0a4ed421b5f73
ms.sourcegitcommit: 60dad5aa0d85db790553e537bf8ac34ee3289ba3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/29/2019
ms.locfileid: "66187624"
---
# <a name="add-a-filter-to-a-report-in-editing-view"></a>Добавление в отчет фильтра в представлении редактирования

В этой статье описано, как добавить фильтр на уровне страницы, визуализации, отчета или детализации в отчет Power BI. Примеры в этой статье даны для службы Power BI, но действия в Power BI Desktop практически идентичны.

**Знаете ли вы?** В Power BI доступны новые функции фильтров, предоставляемые в предварительной версии. См. дополнительные сведения о [новых функциях фильтров в отчетах Power BI](power-bi-report-filter-preview.md).

![Новые функции фильтров](media/power-bi-report-add-filter/power-bi-filter-reading.png)

## <a name="filters-in-editing-view-or-reading-view"></a>Фильтры в представлении правки или чтения
С отчетами можно взаимодействовать в двух представлениях: чтения и правки. Доступные возможности фильтрации зависят от используемого представления. Сведения см. в [статье о фильтрации и выделении в отчетах Power BI](power-bi-reports-filters-and-highlighting.md).

В этой статье описано, как создать фильтры для отчета в **представлении правки**.  См. дополнительные сведения о [взаимодействии с фильтрами отчета в представлении чтения](consumer/end-user-report-filter.md).

## <a name="filter-types-in-the-filters-pane"></a>Типы фильтров на панели "Фильтры"
При использовании классической версии или службы Power BI панель "Фильтры" отображается на холсте отчетов справа. Если панель "Фильтры" отсутствует, разверните ее, щелкнув значок ">" в правом верхнем углу.

Существует четыре типа фильтров: **фильтр страницы**, **визуальный фильтр**, **фильтр детализации** и **фильтр отчета**.

![область "Фильтры" в режиме чтения](media/power-bi-report-add-filter/power-bi-add-filter-reading-view.png)

Так как фильтры *сохраняются* при выходе из отчета, в Power BI сохраняются изменения, внесенные в фильтры, срезы, и другие изменения, касающиеся представления данных. Это позволяет при повторном открытии отчета продолжить начатую работу. Чтобы изменения фильтров не сохранялись, в верхней строке меню нажмите **Вернуться к значениям по умолчанию**.

![кнопка сохранения фильтров](media/power-bi-report-add-filter/power-bi-reset-to-default.png)

## <a name="add-a-filter-to-a-visual"></a>Добавление фильтра к визуальному элементу
Можно добавить фильтр уровня визуальных для конкретного визуального двумя разными способами. 

* отфильтровав поле, которое уже используется в визуализации;
* указав поле, которое не используется в визуализации, и добавив его непосредственно в контейнер **Фильтры уровня визуальных элементов**.

Обратите внимание, что в этой процедуре используется пример "Анализ розничной торговли". Вы можете скачать этот пример и ознакомиться с ним. Скачайте пример [Анализ розничной торговли](sample-retail-analysis.md).

### <a name="filter-the-fields-in-the-visual"></a>Фильтрация полей в визуальном элементе


1. Выберите **изменить отчет** сможете открыть отчет в режиме правки.
   
   ![Кнопка "Изменить отчет"](media/power-bi-report-add-filter/power-bi-edit-view.png)

2. Откройте панели "Визуализации" и "Фильтры" и панель "Поля" (если они еще не открыты).
   
   ![Визуализации, фильтров и полей областей](media/power-bi-report-add-filter/power-bi-display-panes.png)
3. Выберите визуальный элемент, чтобы сделать его активным. Все поля, используемые визуальным элементом, определены на панели **Поля** и перечислены на панели **Фильтры** в разделе **Фильтры уровня визуальных элементов**.
   
   ![Выбор фильтров уровня визуальных элементов](media/power-bi-report-add-filter/power-bi-default-visual-filter.png)
4. На этом этапе мы добавим фильтр к полю, которое уже используется в визуализации. 
   
    Прокрутите вниз до области **Фильтры уровня визуальных элементов** и щелкните стрелку, чтобы развернуть поле, которое нужно отфильтровать. В этом примере будет выполнена фильтрация поля **StoreNumberName**.
     
    ![Стрелку расширяет фильтр](media/power-bi-report-add-filter/power-bi-visual-level-filter.png) 
    
    Выберите элемент управления фильтрации — **Базовый**, **Расширенный** или **Top N** (Первые N). В этом примере мы используем базовый режим фильтрации и выполним поиск строки **cha**, чтобы выбрать пять магазинов, соответствующих критерию.
     
    ![Поиск в простая фильтрация](media/power-bi-report-add-filter/power-bi-search-filter.png) 
   
    Визуальный элемент изменится в соответствии с новым фильтром. Если сохранить отчет с фильтром, в начале работы читатели отчета увидят отфильтрованный визуальный элемент. Затем они могут взаимодействовать с фильтром в представлении чтения, выбирая значения или отменяя их выбор.
     
    ![Отфильтрованные visual](media/power-bi-report-add-filter/power-bi-search-visual-filter-results.png)

### <a name="filter-with-a-field-thats-not-in-the-visual"></a>Фильтрация поля, которое не принадлежит визуальному элементу

Теперь добавим в визуализацию новое поле в качестве фильтра на уровне визуальных элементов.
   
1. На панели "Поля" выберите поле, которое нужно добавить в качестве нового фильтра на уровне визуальных элементов, и перетащите его в область **Фильтры уровня визуальных элементов**.  В этом примере мы перетащим поле **District Manager** в контейнер **Фильтры уровня визуальных элементов**, выполним поиск строки **an** и выберем трех менеджеров, которые соответствуют критерию. 
     
    ![Добавление поля в область фильтров](media/power-bi-report-add-filter/power-bi-search-add-visual-filter.png)

    Обратите внимание, что поле **District Manager** (Региональный менеджер) *не* добавляется к самой визуализации. В визуализации по-прежнему есть параметр **StoreNumberName** (заданный в качестве оси) и **This Year Sales** (Продажи за этот год) (заданный в качестве значения).  
     
    ![Поле не в визуальном элементе](media/power-bi-report-add-filter/power-bi-visualization.png)

    Теперь визуализация отфильтрована и отображает только данные по продажам для этих менеджеров за указанный год в указанных магазинах.
     
    ![Отфильтрованные visual](media/power-bi-report-add-filter/power-bi-search-visual-filter-results-2.png)

    Если сохранить отчет с этим фильтром, читатели отчета смогут взаимодействовать с фильтром **District Manager** (Региональный менеджер), выбирая значения и отменяя их выбор.

## <a name="add-a-filter-to-an-entire-page"></a>Добавление фильтра ко всей странице

Можно также добавить на уровне страницы для фильтрации всей страницы.

1. Выберите **изменить отчет** сможете открыть отчет в режиме правки.
   
   ![Кнопка "Изменить отчет"](media/power-bi-report-add-filter/power-bi-edit-view.png)
2. Откройте панели "Визуализации" и "Фильтры" и панель "Поля" (если они еще не открыты).
3. На панели "Поля" выберите поле, которое нужно добавить в качестве нового фильтра уровня страницы, и перетащите его в область **Фильтры уровня страницы**.  
4. Выберите значения, которые нужно отфильтровать, и установите элемент управления фильтрацией — **Базовый** или **Расширенный**.
   
   Все визуализации на странице перерисовываются в соответствии с изменениями.
   
   ![Добавить фильтр и выберите значения](media/power-bi-report-add-filter/filterpage.gif)

    Если отчет сохранен с фильтром, читатели отчета могут взаимодействовать с фильтром в представлении чтения, выбирая значения или отменяя их выбор.

## <a name="add-a-drillthrough-filter"></a>Добавление фильтра детализации
Используя функцию детализации в службе Power BI и Power BI Desktop, вы можете создать *целевую* страницу отчета, посвященную определенной сущности: поставщику, клиенту или производителю. Теперь пользователи могут щелкнуть правой кнопкой мыши точку данных на других страницах отчета и перейти для детализации на страницу определенной сущности.

### <a name="create-a-drillthrough-filter"></a>Создание фильтра детализации
Для выполнения этой процедуры, скачайте ["рентабельность клиента"](sample-customer-profitability.md). Допустим, вам нужно перейти на страницу, на которой представлены направления деятельности руководителя.

1. Выберите пункт **Изменить отчет**, чтобы открыть отчет в режиме правки.
   
   ![Кнопка "Изменить отчет"](media/power-bi-report-add-filter/power-bi-edit-view.png)

1. Добавьте новую страницу в отчет и назовите ее **Руководитель группы**. Это будет *целевая* страница детализации.
2. Добавьте визуализации, отслеживающие ключевые показатели для направлений деятельности руководителей групп.    
3. Добавьте поля **Руководитель > Имя руководителя** в области фильтров детализации.    
   
    ![Добавление значения фильтры детализации](media/power-bi-report-add-filter/power-bi-drillthrough-filter.png)
   
    Обратите внимание, что Power BI добавляет стрелку "Назад" на страницу отчета.  Если пользователь щелкнет эту стрелку, он вернется к *исходной* странице отчета, на которой он выбрал детализацию. Стрелка "Назад" активна только в представлении чтения.
   
     ![Стрелки назад](media/power-bi-report-add-filter/power-bi-back-arrow.png)

### <a name="use-the-drillthrough-filter"></a>Использование фильтра детализации
Давайте посмотрим, как работает фильтр детализации.

1. Начните со страницы **Командная система показателей** отчета.    
2. Предположим, что вас зовут Сергей Зайцев и вы хотите просмотреть страницу отчета "Руководитель группы", отфильтрованную для отображения только ваших данных.  На диаграмме вверху слева щелкните правой кнопкой мыши любую зеленую точку данных, чтобы открыть пункт меню "Детализация".
   
    ![Запуск действия детализации](media/power-bi-report-add-filter/power-bi-drillthrough.png)
3. Выберите **Детализация > Руководитель группы**, чтобы перейти на страницу детализации отчета **Руководитель группы**. Страница отфильтруется, отображая сведения о точке данных, которую вы щелкнули правой кнопкой мыши. В нашем случае — это Сергей Зайцев. На страницу детализации отчета можно перейти только из поля, добавленного в область "Фильтры детализации".  
   
    ![Выберите действие детализации](media/power-bi-report-add-filter/power-bi-drillthrough-executive.png)

## <a name="add-a-report-level-filter-to-filter-an-entire-report"></a>Добавление уровня отчета для фильтрации всего отчета

1. Выберите пункт **Изменить отчет**, чтобы открыть отчет в режиме правки.
   
   ![Кнопка "Изменить отчет"](media/power-bi-report-add-filter/power-bi-edit-view.png)

2. Откройте область визуализации и фильтры и области полей, если они еще не открыты.
3. На панели "Поля" выберите поле, которое нужно добавить в качестве нового фильтра на уровне отчета, и перетащите его в область **Фильтры уровня отчетов**.  
4. Выберите значения, которые нужно отфильтровать.

    Визуальные элементы на активной странице, а также на всех страницах отчета изменятся в соответствии с новым фильтром. Если отчет сохранен с фильтром, читатели отчета могут взаимодействовать с фильтром в представлении чтения, выбирая значения или отменяя их выбор.

1. Щелкните стрелку "Назад", чтобы вернуться на предыдущую страницу отчета.

## <a name="considerations-and-troubleshooting"></a>Рекомендации и устранение неполадок

- Возможны ситуации, когда фильтр на уровне визуализации и фильтр на уровне страницы возвращают разные результаты.  Например, при добавлении фильтра на уровне визуализации Power BI выполняет фильтрацию по статистически обработанным результатам.  По умолчанию используется сумма данных, но [тип статистической обработки можно изменить](service-aggregates.md).  

    Затем при добавлении фильтра на уровне страницы Power BI применяет фильтрование без статистической обработки.  Агрегирование не выполняется, так как страница может содержать несколько визуальных элементов, в каждом из которых используются разные типы статических вычислений.  Таким образом, фильтр применяется в каждой строке данных.

- Если область полей не отображается, убедитесь, что вы выбрали [режим редактирования](service-interact-with-a-report-in-editing-view.md) отчета.    
- Если вы внесли множество изменений в фильтры и хотите восстановить параметры отчета по умолчанию, заданные автором, в верхней строке меню выберите команду **Вернуться к значениям по умолчанию**.

## <a name="next-steps"></a>Дальнейшие действия
[Ознакомление с панелью "Фильтры" отчета](consumer/end-user-report-filter.md)

[Фильтры и выделение в отчетах](power-bi-reports-filters-and-highlighting.md)

[Взаимодействие с отчетом в представлении чтения в Power BI](consumer/end-user-reading-view.md)

[Взаимодействие с визуализациями в отчете Power BI](consumer/end-user-interactions.md)

Появились дополнительные вопросы? [Ответы на них см. в сообществе Power BI.](http://community.powerbi.com/)

