---
title: Управление своим источником данных — SQL
description: Сведения об управлении локальным шлюзом данных и источниками, которые к нему относятся.
author: mgblythe
manager: kfile
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-gateways
ms.topic: conceptual
ms.date: 07/15/2019
ms.author: mblythe
LocalizationGroup: Gateways
ms.openlocfilehash: 2c21792f97445b336709038f7ec2ec39d041312b
ms.sourcegitcommit: 73228d0a9038b8369369c059ad06168d2c5ff062
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/02/2019
ms.locfileid: "68730054"
---
# <a name="manage-your-data-source---sql-server"></a>Управление своим источником данных — SQL Server

[!INCLUDE [gateway-rewrite](includes/gateway-rewrite.md)]

После [установки локального шлюза данных](/data-integration/gateway/service-gateway-install) можно [добавить источники данных](service-gateway-data-sources.md#add-a-data-source), которые можно будет использовать с ним. В этой статье рассмотрены способы работы со шлюзами и источниками данных SQL Server, которые используются для запланированного обновления или DirectQuery.

## <a name="add-a-data-source"></a>Добавление источника данных

Сведения о том, как добавить источник данных, см. в статье [Добавление источника данных](service-gateway-data-sources.md#add-a-data-source).

![Выбор источника данных SQL Server](media/service-gateway-enterprise-manage-sql/datasourcesettings2.png)

> [!NOTE]
> При использовании DirectQuery шлюз поддерживает только **SQL Server 2012 SP1** и последующие версии.

После этого заполните сведения об источнике данных, включая значения **Сервер** и **База данных**.  

Кроме того, нужно выбрать **Метод проверки подлинности**. Можно выбрать параметр **Windows** или **Базовый**. Если вместо проверки подлинности Windows планируется использовать проверку подлинности SQL, выберите вариант **Базовый**. Затем введите учетные данные, которые будут использоваться для этого источника данных.

> [!NOTE]
> Все запросы к источнику данных будут выполняться с использованием этих учетных данных, если только единый вход Kerberos не настроен и не включен для источника данных. С помощью единого входа при импорте наборов данных используются сохраненные учетные данные, но в наборах данных DirectQuery для выполнения запросов с использованием единого входа используется текущий пользователь Power BI. Дополнительные сведения о хранении учетных данных см. в статье [Хранение зашифрованных учетных данных в облаке](service-gateway-data-sources.md#store-encrypted-credentials-in-the-cloud) или в статье [Использование Kerberos для единого входа из Power BI в локальные источники данных](service-gateway-sso-kerberos.md).

![Задание параметров источников данных](media/service-gateway-enterprise-manage-sql/datasourcesettings3.png)

Заполнив все данные, нажмите кнопку **Добавить**. Теперь этот источник данных можно использовать для запланированного обновления или для DirectQuery на сервере SQL Server, расположенном на локальном компьютере. В случае успеха появится сообщение *Подключение установлено*.

![Отображение состояния подключения](media/service-gateway-enterprise-manage-sql/datasourcesettings4.png)

### <a name="advanced-settings"></a>Дополнительные параметры

Для источника данных также можно настроить уровень конфиденциальности. Он определяет, каким образом можно комбинировать данные. Используется только для запланированного обновления. Не применяется к DirectQuery. Дополнительные сведения об уровнях конфиденциальности для источника данных см. в статье [Уровни конфиденциальности (Power Query)](https://support.office.com/article/Privacy-levels-Power-Query-CC3EDE4D-359E-4B28-BC72-9BEE7900B540).

![Настройка уровня конфиденциальности](media/service-gateway-enterprise-manage-sql/datasourcesettings9.png)

## <a name="using-the-data-source"></a>Работа с источником данных

После создания источника данных он будет доступен для использования с подключениями DirectQuery или через функцию запланированного обновления.

> [!NOTE]
> Имена сервера и базы данных в Power BI Desktop и источнике данных в конфигурации локального шлюза должны совпадать.

Связь между набором и источником данных в пределах шлюза основана на именах сервера и базы данных. Они должны совпадать. Например, если вы указали IP-адрес в качестве имени сервера в **Power BI Desktop**, необходимо будет использовать такой IP-адрес и для источника данных в конфигурации шлюза. Если вы используете формат *СЕРВЕР\ЭКЗЕМПЛЯР* в Power BI Desktop, нужно использовать тот же формат и в источнике данных, настроенном для шлюза.

Это условие справедливо и для DirectQuery, и для запланированного обновления.

### <a name="using-the-data-source-with-directquery-connections"></a>Использование источника данных с подключениями DirectQuery

Имена сервера и базы данных должны совпадать в **Power BI Desktop** и источнике данных для шлюза. Кроме того, для публикации наборов данных DirectQuery ваша учетная запись должна быть указана на вкладке **Пользователи** источника данных. Выбор для DirectQuery выполняется в Power BI Desktop при импорте данных. Дополнительные сведения об использовании DirectQuery см. в статье [Использование DirectQuery в Power BI Desktop](desktop-use-directquery.md).

После публикации (из Power BI Desktop или окна **Получение данных**) ваши отчеты должны начать работать. Установка подключения после создания источника данных в рамках шлюза может занять несколько минут.

### <a name="using-the-data-source-with-scheduled-refresh"></a>Использование источника данных с запланированным обновлением

Если вы указаны на вкладке **Пользователи** источника данных, настроенного в шлюзе, а имена сервера и базы данных совпадают, вы увидите шлюз в списке вариантов, доступных для использования с запланированным обновлением.

![Отображение пользователей](media/service-gateway-enterprise-manage-sql/powerbi-gateway-enterprise-schedule-refresh.png)

## <a name="next-steps"></a>Дальнейшие действия

* [Подключение к локальным источникам данных в SQL Server](service-gateway-sql-tutorial.md)
* [Устранение неполадок локального шлюза данных](/data-integration/gateway/service-gateway-tshoot)
* [Устранение неполадок со шлюзами — Power BI](service-gateway-onprem-tshoot.md)
* [Использование Kerberos для единого входа из Power BI в локальные источники данных](service-gateway-sso-kerberos.md)

Появились дополнительные вопросы? [Ответы на них см. в сообществе Power BI.](http://community.powerbi.com/)

