---
title: Переход на следующий и предыдущий уровень детализации в визуализации
description: В этом документе демонстрируется детализация в визуализации в службе Microsoft Power BI и Power BI Desktop.
author: mihart
manager: kvivek
ms.reviewer: ''
featuredvideoid: MNAaHw4PxzE
ms.custom: seodec18
ms.service: powerbi
ms.subservice: powerbi-desktop
ms.topic: conceptual
ms.date: 12/06/2018
ms.author: mihart
LocalizationGroup: Visualizations
ms.openlocfilehash: bc5033df204fafcc7316d6708d7b39429e8e9cba
ms.sourcegitcommit: 60dad5aa0d85db790553e537bf8ac34ee3289ba3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/29/2019
ms.locfileid: "61053501"
---
# <a name="drill-mode-in-a-visualization-in-power-bi"></a>Режим детализации в визуализации в Power BI

## <a name="drill-requires-a-hierarchy"></a>Детализация с использованием иерархии
Если визуализация имеет иерархию, вы можете выполнить детализацию, чтобы отобразить дополнительные сведения. Например, вы можете создать визуализацию, которая отслеживает количество олимпийских медалей, с иерархией, состоящей из категорий "Спорт", "Дисциплина" и "Событие". По умолчанию в визуализации количество медалей будет отображаться по спортивным дисциплинам, таким как гимнастика, лыжный спорт, водные виды спорта и т. д. Но так как она имеет иерархию, после выбора одного из визуальных элементов (например, линейчатой диаграммы, графика или пузырьковой диаграммы) отобразятся более подробные данные. Выберите элемент **Водные виды спорта**, чтобы просмотреть данные по плаванию, прыжкам в воду и водному поло.  Затем выберите элемент **Прыжки в воду**, чтобы просмотреть данные по прыжкам с трамплина, прыжкам в воду и синхронным прыжкам в воду.

Вы можете добавлять иерархию только в собственные отчеты, но не в совместно используемые.
Не уверены, какая визуализация Power BI содержит иерархию?  Наведите указатель мыши на визуализацию, и если в верхнем углу появятся элементы управления детализацией, показанные ниже, значит визуализация имеет иерархию.

![переход на один уровень детализации вниз](./media/end-user-drill/power-bi-drill-icon4.png) ![включение и отключение детализации](./media/end-user-drill/power-bi-drill-icon2.png) ![значок одновременной детализации всех полей](./media/end-user-drill/power-bi-drill-icon3.png)
 ![значок возращения на предыдущий уровень детализации](./media/end-user-drill/power-bi-drill-icon5.png) ![значок разворачивания вниз](./media/end-user-drill/power-bi-drill-icon6.png)  

Даты — это уникальный тип иерархии. При добавлении поля даты в визуализацию Power BI автоматически добавляет иерархию времени, которая включает в себя год, квартал, месяц и день. Дополнительные сведения см. в статье [Иерархии и детализация визуальных элементов](../guided-learning/visualizations.yml?tutorial-step=18) или посмотрите видеоролик ниже.


  <iframe width="560" height="315" src="https://www.youtube.com/embed/MNAaHw4PxzE?list=PL1N57mwBHtN0JFoKSR0n-tBkUJHeMP2cP" frameborder="0" allowfullscreen></iframe>

> [!NOTE]
> Чтобы узнать, как создать иерархии с помощью Power BI Desktop, см. видеоролик, посвященный [созданию и добавлению иерархий](https://youtu.be/q8WDUAiTGeU)
> 

## <a name="prerequisites"></a>Предварительные требования

1. В службе Power BI или приложении Power BI Desktop для детализации требуется визуализация с иерархией. 
   
2. Чтобы продолжить, [откройте пример анализа розничной торговли](../sample-datasets.md) и создайте диаграмму "дерево", на которой показано **общее количество единиц, проданных за этот год** (значения) с разбивкой по **территории**, **городу**, **почтовому индексу** и **имени** (группа).  Иерархия диаграммы "дерево" состоит из категорий "Территория", "Город", "Почтовый индекс" и "Название города". Каждая территория состоит из одного или нескольких городов, каждый город имеет один или несколько почтовых индексов и т. д. По умолчанию в визуализации отображаются только данные о территории, так как категория *Территория* стоит первой в списке.
   
   ![Выбор элемента "Территория"](media/end-user-drill/power-bi-hierarcy-list.png)

2. Взаимосвязь разных значков детализации не всегда очевидна. Давайте рассмотрим ее на примере диаграммы "дерево", отфильтрованной для отображения двух небольших территорий: **KY** и **TN**. Выберите диаграмму дерева, затем в колонке **Фильтры уровня визуальных элементов** разверните раздел **Территория** и выберите элементы **KY** и **TN**.

    ![фильтры для KY и TN](./media/end-user-drill/power-bi-filter.png)    

   Теперь на диаграмме "дерево" отображаются только две территории.

   ![значок детализации в виде двойной стрелки](./media/end-user-drill/power-bi-territories.png)

## <a name="three-ways-to-access-the-drill-features"></a>Три способа доступа к функциям детализации
У вас есть несколько способов вызвать функции детализации, обобщения и развертывания для визуализаций с иерархиями. Они описываются ниже. Все эти способы реализуют одно и то же действие, поэтому, ознакомившись с основными принципами детализации и развертывания, вы можете опробовать их все и выбрать понравившийся.

- Наведите указатель мыши на визуализацию, чтобы отобразились значки.  

    ![путь детализации](./media/end-user-drill/power-bi-hover.png)

- Щелкните визуализацию правой кнопкой мыши, чтобы открыть меню.
    
    ![контекстное меню](./media/end-user-drill/power-bi-drill-menu.png)

- В строке меню Power BI нажмите кнопку **Исследовать**.

   ![Выбор действия "Просмотреть", а также отображение значков и параметров детализации](media/end-user-drill/power-bi-explore.png)

## <a name="drill-pathways"></a>Пути детализации
### <a name="drill-down"></a>Детализация
Детализировать визуализацию можно несколькими способами. При ***детализации*** вы переходите к следующему уровню в иерархии. Например, с уровня **Территория** можно перейти на уровень города, затем на уровень почтового индекса и, наконец, на уровень названия. На каждом этапе отображаются новые сведения.

![путь детализации](./media/end-user-drill/power-bi-drill-path.png)

### <a name="expand"></a>Развернуть

При ***развертывании*** к текущему представлению добавляется дополнительный уровень иерархии. Например, на уровне **Территория** можно развернуть диаграмму "дерево" и добавить в нее сведения о городе, почтовом индексе и названии. На каждом последующем этапе отображаются те же сведения, что и на предыдущем, с добавлением одного нового уровня.

![путь развертывания](./media/end-user-drill/power-bi-expand-path.png)

Кроме того, можно выбрать, должна ли детализация или развертывание выполняться по одному полю или по всем полям одновременно. 

## <a name="drill-down-all-fields-at-a-time"></a>Детализацию по всем полям одновременно

1. Начните с верхнего уровня диаграммы "дерево", где отображаются данные для KY и TN. Расширьте диаграмму, выбрав один из маркеров и перетащив его вправо. 

    ![Диаграмма "дерево" с данными для двух штатов](./media/end-user-drill/power-bi-drill-down.png) .

2. Чтобы перейти к детализации по ***всем полям одновременно***, щелкните двойную стрелку в левом верхнем углу визуализации ![значок детализации в виде двойной стрелки](./media/end-user-drill/power-bi-drill-icon3.png). Теперь на диаграмме "дерево" представлены данные по городам в штатах Кентукки и Теннесси. 

    ![значок детализации в виде двойной стрелки](./media/end-user-drill/power-bi-drill-down1.png)
   
5. Еще раз перейдите к следующему уровню в иерархии, теперь до почтового индекса.

    ![значок детализации в виде двойной стрелки](./media/end-user-drill/power-bi-drill-down2.png)

3. Чтобы вернуться на предыдущий уровень детализации, выберите стрелку вверх в левом верхнем углу визуализации. ![Значок перехода на один уровень вверх в иерархии](./media/end-user-drill/power-bi-drill-icon5.png).


## <a name="drill-down-one-field-at-a-time"></a>Детализация по одному полю за раз
Этот метод основан на использовании значка детализации, который находится в правом верхнем углу самой визуализации. 

1. Чтобы включить детализацию, щелкните значок детализации ![значок включения детализации](./media/end-user-drill/power-bi-drill-icon2.png). Теперь можно выполнять детализацию по ***одному полю за раз***. 
   
   ![Стрелка, указывающая на значок включения детализации](media/end-user-drill/power-bi-drill-icon-new.png)

   Если детализация отключена, при выборе визуального элемента (например, линейчатой или пузырьковой диаграммы либо листового узла) выполняется не детализация, а перекрестная фильтрация других диаграмм на странице отчета.

2. Выберите *листовой узел* для штата **TN**. Теперь на диаграмме "дерево" отображаются все города в штате Теннесси, в которых есть магазины. 

    ![Диаграмма "дерево" с данными только по штату Теннесси](media/end-user-drill/power-bi-drill-down-one1.png)

2. Вы можете продолжить детализацию с углублением по штату Теннесси или определенному городу этого штата либо вернуться на предыдущий уровень (см. раздел о **развертывании всех полей одновременно** ниже). Давайте произведем детализацию по одному полю за раз.  Выберите **Ноксвилл, TN**. Теперь на диаграмме "дерево" отображается почтовый индекс магазина в Ноксвилле. 

   ![Диаграмма "дерево" с почтовым индексом 37919](media/end-user-drill/power-bi-drill-down-one2.png)

    Обратите внимание, что при переходе между уровнями детализации изменяется заголовок.  

## <a name="expand-all-and-expand-one-field-at-a-time"></a>Развертывание всех полей и одного поля за раз
Диаграмма "дерево", на которой отображается только почтовый индекс, не очень информативна.  Давайте развернем ее на один уровень вниз в иерархии.  

1. Откройте диаграмму "дерево" и щелкните значок *развертывания вниз* ![значок развертывания вниз](./media/end-user-drill/power-bi-drill-icon6.png). Теперь на диаграмме "дерево" отображаются 2 уровня иерархии: почтовый индекс и название магазина. 

    ![Отображение почтового индекса и названия магазина](./media/end-user-drill/power-bi-expand1.png)

2. Чтобы увидеть все 4 уровня иерархии данных для штата Теннесси, щелкайте стрелку детализации, пока не достигнете второго уровня на диаграмме "дерево": **Всего единиц в этом году по территории и городу**. 

    ![диаграмма "дерево" с полными данными по штату Теннесси](media/end-user-drill/power-bi-drill-down-one1.png)


3. Убедитесь в том, что детализация еще включена ![детализация включена](./media/end-user-drill/power-bi-drill-icon2.png), и щелкните значок *развертывания вниз* ![значок развертывания вниз](./media/end-user-drill/power-bi-drill-icon6.png). Теперь на диаграмме "дерево" отображаются дополнительные сведения: помимо города и штата, также отображается почтовый индекс. 

    ![значок детализации в виде двойной стрелки](./media/end-user-drill/power-bi-expand-one3.png)

4. Еще раз щелкните значок *развертывания вниз*, чтобы на диаграмме "дерево" отобразились все четыре уровня иерархии данных для штата Теннесси. Чтобы просмотреть еще более подробные сведения, наведите указатель на листовой узел.

   ![диаграмма "дерево" с данными по штату Теннесси](./media/end-user-drill/power-bi-expand-all.png)

## <a name="drilling-filters-other-visuals"></a>Детализирующие фильтры для других визуальных элементов
При работе в режиме детализации вы можете выбрать, как детализация и развертывание будут влиять на другие визуализации на странице. 

По умолчанию при детализации другие визуальные элементы в отчете не фильтруются. Однако такую возможность можно включить в приложении Power BI Desktop и службе Power BI. 

1. В Power BI Desktop перейдите на вкладку **Формат** и установите флажок **Детализирующие фильтры для других визуализаций**.

    ![настройка в Power BI Desktop](./media/end-user-drill/power-bi-drill-filters-desktop.png)

2. Теперь, когда в визуальном элементе с иерархией выполняется детализация углублением, детализация обобщением или развертывание, фильтруются и другие визуальные элементы на странице. 

    ![настройка в Power BI Desktop](./media/end-user-drill/power-bi-drill-filters.png)

    ![настройка в Power BI Desktop](./media/end-user-drill/power-bi-drill-filters2.png)

> [!NOTE]
> Чтобы включить эту возможность в службе Power BI, в верхней строке меню выберите **Интерактивное взаимодействие > Детализирующие фильтры для других визуализаций**.
>
> ![настройка в службе Power BI](./media/end-user-drill/power-bi-drill-filters-service.png)



## <a name="understanding-the-hierarchy-axis-and-hierarchy-group"></a>Основные сведения об оси иерархии и группе иерархии
Ось иерархии и группу иерархии можно считать механизмами, позволяющими повышать и понижать степень детализации данных, которые вы хотите просмотреть. Любые данные, которые можно разбить на категории и подкатегории, считаются имеющими иерархическую структуру. Сюда, конечно, входят данные о датах и времени.

Можно создать визуализацию с иерархией в Power BI, выбрав одно или несколько полей данных, добавляемых в колодец **Ось** или **Группа**, вместе с данными, которые требуется просматривать как поля данных, в колодце **Значения**. Вы узнаете, имеют ли ваши данные иерархическую структуру, по тому, появляются ли значки *режима детализации* в верхних левом и правом углах визуализации. 

В сущности, целесообразно разбить иерархические данные на два типа.
- Данные о датах и времени. Если существует поле данных с типом данных DateTime, то у вас уже имеются иерархические данные. Power BI автоматически создает иерархию для любого поля данных, значения которого можно проанализировать в структуре [DateTime](https://msdn.microsoft.com/library/system.datetime.aspx). Достаточно просто добавить одно поле DateTime в колодец **Ось** или **Группа**.
- Категориальные данные. Если ваши данные извлекаются из коллекций, которые содержат вложенные коллекции, или в них существуют строки данных с общими значениями, то такие данные считаются иерархическими.

Power BI позволяет разворачивать данные по одному или по всем подмножествам. Вы можете выполнять детализацию, чтобы просматривать по одному подмножеству на каждом уровне или просмотреть все подмножества одновременно на каждом уровне. Например, можно выполнить детализацию, чтобы увидеть результаты для определенного года, или просмотреть все результаты для каждого года, продвигаясь вниз по иерархии. И наоборот, можно таким же образом понижать степень детализации.

В следующих разделах описывается повышение степени детализации от представления наивысшего уровня, представления среднего уровня и представления наинизшего уровня.

### <a name="hierarchical-data-and-time-data"></a>Иерархические данные и данные о времени
В данном примере используйте [пример анализа розничной торговли](../sample-datasets.md) и создайте визуализацию в виде гистограммы с накоплением для просмотра месяцев **Month** (ось) по объемам продаж **TotalSales** (значения).  

Несмотря на то, что поле данных оси — **Month** (Месяц), в колодце **Ось** создается также категория **Year** (Год). Это происходит потому, что Power BI обеспечивает полную структуру DateTime для всех считываемых значений. На верхнем уровне иерархии отображаются данные за год.

![Одна строка с данными, сгруппированными по годам](media/end-user-drill/power-bi-hierarchical-axis-datetime-1.png)

Включите режим детализации и щелкните столбец на диаграмме, чтобы перейти на один уровень иерархии вниз. Вы увидите три столбца для данных по доступным кварталам. Затем в верхнем левом значке выберите пункт **Expand all down one level of the hierarchy** (Развернуть все на один уровень иерархии вниз). Затем повторите это действие еще раз, чтобы дойти до самого нижнего уровня иерархии, на котором показываются результаты для каждого месяца.

![Линейчатая диаграмма, на которой каждый столбец обозначает определенный месяц](media/end-user-drill/power-bi-hierarchical-axis-datetime-2.png)

Помимо визуализации, иерархия также отражается в данных, отображаемых для каждого отчета. В следующей таблице показаны результаты команды **Show Data** (Просмотр данных) в отчете с детализацией от одного месяца или всех месяцев. 

Обратите внимание, что данные для квартального и годового отчетов одинаковы, но после детализации до уровня, указанного для **значений**, можно видеть, что отчет для одного месяца становится более конкретным, а отчет для всех месяцев имеет больше данных.


|Режим развертывания|Год|Квартал|Месяц|День|
| ---|:---:|:---:|:---:|---|
|Однонаправленная|![Один год](./media/end-user-drill/power-bi-hierarchical-year.png)|![Один квартал](media/end-user-drill/power-bi-hierarchical-quarter.png)|![Один месяц](./media/end-user-drill/power-bi-hierarchical-one-month.png)|![Один день](media/end-user-drill/power-bi-hierarchical-one-day.png)|
|Все|![Все годы](./media/end-user-drill/power-bi-hierarchical-year.png)|![Все кварталы](media/end-user-drill/power-bi-hierarchical-quarter.png)|![Все месяцы](./media/end-user-drill/power-bi-hierarchical-all-month.png)|![Все дни](media/end-user-drill/power-bi-hierarchical-all-day.png)|


### <a name="hierarchical-category-data"></a>Данные иерархических категорий
Данные, которые моделируются по коллекциям и вложенным коллекциям, являются иерархическими. Хорошим примером таких данных являются данные о расположении. Рассмотрим таблицу в источнике данных, в столбцах которого указаны страна, регион, город и почтовый индекс. Данные, имеющие одинаковую страну, регион и город, являются иерархическими.

В данном примере используйте [пример анализа розничной торговли](../sample-datasets.md). Создайте визуализацию в виде гистограммы с накоплением для просмотра **общего количества единиц за этот год** (значения) по **территории**, **городу**, **почтовому индексу** и **названию** (группа).  

![Гистограмма с отображением общего количества единиц за этот год по территории](media/end-user-drill/power-bi-hierarchical-axis-category-1.png)

Если режим детализации включен, в верхнем левом углу три раза щелкните значок **Expand all down one level of the hierarchy** (Развернуть все на один уровень иерархии вниз).
Вы должны оказаться на самом низком уровне иерархии, на котором отображаются результаты для территории, города и почтового индекса.

![Гистограмма, на которой показан самый нижний уровень иерархии, то есть наиболее подробная](media/end-user-drill/power-bi-hierarchical-axis-category-2.png)

Помимо визуализации, иерархия также отражается в данных, отображаемых для каждого отчета. В следующей таблице показаны результаты команды **Show Data** (Просмотр данных) в отчете с детализацией по одной территории или по всем территориям. По мере детализации можно видеть, как отчет для одной территории становится все более конкретным, а в отчете для всех территорий отображается все больше данных.


| Режим развертывания|Territory|Город|Почтовый индекс|Имя|
| ---|:---:|:---:|:---:|---|
|Однонаправленная|![Одна территория](./media/end-user-drill/power-bi-hierarchical-territory.png)|![Один город](media/end-user-drill/power-bi-hierarchical-one-territory-city.png)|![Один почтовый индекс](./media/end-user-drill/power-bi-hierarchical-one-territory-city-postal.png)|![Одно название магазина](media/end-user-drill/power-bi-hierarchical-one-territory-city-postal-name.png)|
|Все|![Все территории](./media/end-user-drill/power-bi-hierarchical-territory.png)|![Все города](media/end-user-drill/power-bi-hierarchical-all-territory-city.png)|![Все почтовые индексы](./media/end-user-drill/power-bi-hierarchical-all-territory-city-postal.png)|![Все названия](media/end-user-drill/power-bi-hierarchical-all-territory-city-postal-name.png)|


## <a name="considerations-and-limitations"></a>Рекомендации и ограничения
* Если после добавления поля даты в визуализацию иерархия не была создана, это может означать, что это поле не сохранено в качестве даты. Если у вас есть набор данных, откройте его в представлении *Данные* в Power BI Desktop, выберите столбец, содержащий дату, а затем на вкладке "Моделирование" задайте для параметра **Data Type** (Тип данных) значение **Date** (Дата) или **Date/Time** (Дата и время). Если отчет предоставил вам другой пользователь, свяжитесь с ним и попросите внести изменения.  
  
  ![Выбор представления данных и типа данных в верхнем правом углу](media/end-user-drill/power-bi-change-data-type2.png)

## <a name="next-steps"></a>Дальнейшие действия
[Визуализации в отчетах Power BI](../visuals/power-bi-report-visualizations.md)

[Отчеты Power BI](end-user-reports.md)

[Power BI — основные понятия](end-user-basic-concepts.md)

Появились дополнительные вопросы? [Ответы на них см. в сообществе Power BI.](http://community.powerbi.com/)

