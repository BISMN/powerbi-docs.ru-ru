---
title: Настройка рабочих нагрузок в Power BI Premium
description: Сведения о настройке рабочих нагрузок в емкости Power BI Premium.
author: mgblythe
ms.author: mblythe
manager: kfile
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-admin
ms.topic: conceptual
ms.date: 04/15/2019
LocalizationGroup: Premium
ms.openlocfilehash: 49a1f02e5aa327c2704b6c2d789934a43b760ad0
ms.sourcegitcommit: 0e50ebfa8762e19286566432870ef16d242ac78f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/13/2019
ms.locfileid: "68962035"
---
# <a name="configure-workloads-in-a-premium-capacity"></a>Настройка рабочих нагрузок в емкости Premium

Эта статья описывает включение и настройку рабочих нагрузок для емкостей Power BI Premium. По умолчанию емкости поддерживают только рабочие нагрузки, связанные с выполнением запросов Power BI. Вы можете включить и настроить дополнительные рабочие нагрузки для **[искусственного интеллекта (Cognitive Services)](service-cognitive-services.md)** , **[потоков данных](service-dataflows-overview.md#dataflow-capabilities-on-power-bi-premium)** и **[отчетов с разбивкой на страницы](paginated-reports-save-to-power-bi-service.md)** .

## <a name="default-memory-settings"></a>Параметры памяти по умолчанию

Рабочие нагрузки запросов оптимизированы для ресурсов, определенных SKU емкости Premium, и ограничены ими. Емкости Premium также поддерживают дополнительные рабочие нагрузки, способные использовать ресурсы емкости. Значения памяти по умолчанию для этих рабочих нагрузок основаны на узлах емкости, доступных для вашего номера SKU. Параметры максимального объема памяти не являются накопительными. Объем памяти до максимального указанного значения выделяется динамически для искусственного интеллекта и потоков данных, но статически для отчетов с разбивкой на страницы.

### <a name="microsoft-office-skus-for-software-as-a-service-saas-scenarios"></a>Номера SKU Microsoft Office для сценариев SaaS (программное обеспечение как услуга)

|                     | EM2                      | EM3                       | P1                      | P2                       | P3                       |
|---------------------|--------------------------|--------------------------|-------------------------|--------------------------|--------------------------|
| ИИ | Н/Д | Н/Д | По умолчанию 20 %; не менее 20 % | По умолчанию 20 %; не менее 10 % | По умолчанию 20 %; не менее 5 % |
| Потоки данных | Н/Д |По умолчанию 20 %; не менее 12 %  | По умолчанию 20 %; не менее 5 %  | По умолчанию 20 %; не менее 3 % | По умолчанию 20 %; не менее 2 %  |
| Отчеты с разбивкой на страницы | Н/Д |Н/Д | По умолчанию 20 %; не менее 10 % | По умолчанию 20 %; не менее 5 % | По умолчанию 20 %; не менее 2,5 % |
| | | | | | |

### <a name="microsoft-azure-skus-for-platform-as-a-service-paas-scenarios"></a>Номера SKU Microsoft Azure для сценариев PaaS (платформа как услуга)

|                  | A1                       | A2                       | A3                      | A4                       | A5                      | A6                        |
|-------------------|--------------------------|--------------------------|-------------------------|--------------------------|-------------------------|---------------------------|
| ИИ | Н/Д                      | По умолчанию 20 %; не менее 100 %                     | По умолчанию 20 %; не менее 50 %                     | По умолчанию 20 %; не менее 20 % | По умолчанию 20 %; не менее 10 % | По умолчанию 20 %; не менее 5 % |
| Потоки данных         | По умолчанию 40 %; не менее 40 % | По умолчанию 24 %; не менее 24 % | По умолчанию 20 %; не менее 12 % | По умолчанию 20 %; не менее 5 %  | По умолчанию 20 %; не менее 3 % | По умолчанию 20 %; не менее 2 %   |
| Отчеты с разбивкой на страницы | Н/Д                      | Н/Д                      | Н/Д                     | По умолчанию 20 %; не менее 10 % | По умолчанию 20 %; не менее 5 % | По умолчанию 20 %; не менее 2,5 % |
| | | | | | |

## <a name="workload-settings"></a>Параметры рабочей нагрузки

### <a name="ai-preview"></a>Искусственный интеллект (предварительная версия)

Помимо параметра **Максимальный объем памяти**, рабочая нагрузка искусственного интеллекта имеет дополнительный параметр **Разрешить использование из Power BI Desktop**. Значение по умолчанию — **Выкл**. Этот параметр зарезервирован для использования в будущем и может отображаться не во всех клиентах.

### <a name="datasets-preview"></a>Наборы данных (предварительная версия)

По умолчанию рабочая нагрузка "Наборы данных" включена, и ее нельзя отключить. Эта рабочая нагрузка содержит дополнительный параметр для _конечной точки XMLA_ и ряд параметров, связанных с производительностью. Параметр **конечной точки XMLA** указывает, что подключения от клиентских приложений учитывают членство в группах безопасности, настроенное на уровнях рабочей области и приложения. Дополнительные сведения см. в разделе [Подключение к наборам данных с помощью клиентских приложений и средств](service-premium-connect-tools.md).

Параметры, связанные с производительностью, описаны в приведенной ниже таблице.

| Имя параметра | Описание | Usage |
|---------------------------------|----------------------------------------|----------------------------------------|
| **Максимальное число промежуточных наборов строк** | Максимальное число промежуточных строк, возвращаемых DirectQuery. Значение по умолчанию равно 1 000 000, а допустимый диапазон — от 100 000 до 2 147 483 647. | Позволяет контролировать влияние ресурсоемких или плохо спроектированных отчетов. |
| **Максимальный размер автономного набора данных (ГБ)** | Максимальный размер автономного набора данных в памяти. Это сжатый размер на диске. Значение по умолчанию определяется номером SKU, а допустимый диапазон — от 0,1 до 10 ГБ. | Позволяет запретить авторам отчетов публиковать большие наборы данных, которые могут негативно сказаться на емкости. |
| **Максимальное число наборов результирующих строк** | Определяет максимальное число строк, возвращаемых в запросе DAX. Значение по умолчанию равно –1 (без ограничения), а допустимый диапазон — от 100 000 до 2 147 483 647. | Позволяет контролировать влияние ресурсоемких или плохо спроектированных отчетов. |
| **Предельный объем памяти для запросов (%)** | Применяется только к мерам и запросам DAX. Указывается в процентах и ограничивает объем памяти, который может использоваться для временных результатов во время запроса. | Позволяет контролировать влияние ресурсоемких или плохо спроектированных отчетов. |
| **Время ожидания запроса (в секундах)** | Целое число, определяющее время ожидания для запросов в секундах. Значение по умолчанию — 3600 секунд (или 60 минут). Ноль (0) означает, что время ожидания запросов не истекает. | Позволяет лучше контролировать долго выполняющиеся запросы. |
|  |  |  |

### <a name="dataflows"></a>Потоки данных

Помимо параметра **Максимальный объем памяти**, рабочая нагрузка "Потоки данных" имеет дополнительный параметр **Размер контейнера**. Этот параметр позволяет оптимизировать производительность рабочей нагрузки "Потоки данных" для обработки более сложных потоков данных с большим объемом вычислений.

При обновлении потока данных рабочая нагрузка порождает контейнер для каждой сущности в потоке данных. Каждый контейнер может использовать память вплоть до объема, указанного в параметре "Размер контейнера". Значение по умолчанию для всех номеров SKU — **700 МБ**. Этот параметр может потребоваться изменить в указанных ниже случаях.

- Обновление потоков данных занимает слишком много времени или завершается сбоем из-за истечения времени ожидания.
- Сущности потоков данных включают в себя вычислительные этапы, например соединение.  

Для анализа производительности рабочей нагрузки "Потоки данных" рекомендуется использовать [приложение метрик емкости Power BI Premium](service-admin-premium-monitor-capacity.md). 

В некоторых случаях увеличение размера контейнера может не привести к повышению производительности. Например, если поток данных просто получает данные из источника, не выполняя значительных вычислений, изменение размера контейнера, скорее всего, не даст результата. Увеличение размера контейнера может помочь, если оно даст рабочей нагрузке потока данных возможность выделить больше памяти для операций обновления сущности. Выделение большего объема памяти может сократить время, затрачиваемое на обновление сущностей с большим объемом вычислений.

Значение параметра "Размер контейнера" не может превышать максимальный объем памяти для рабочей нагрузки "Потоки данных". Например, емкость P1 имеет 25 ГБ памяти. Если максимальный объем памяти для рабочей нагрузки потока данных (в процентах) установлен в значение 20 %, размер контейнера (в МБ) не может превышать 5000. Размер контейнера в любом случае не может превышать максимальный объем памяти, даже если задано более высокое значение.

### <a name="paginated-reports-preview"></a>Отчеты с разбивкой на страницы (предварительная версия)

Отчеты с разбивкой на страницы позволяют запускать собственный код для отрисовки отчета. Например, можно динамически изменять цвет текста в зависимости от содержимого, для чего требуется дополнительная память. Power BI Premium выполняет отчеты с разбивкой на страницы в автономной области в пределах емкости. Указанный максимальный объем памяти используется *независимо* от активности рабочей нагрузки. Если вы изменяете максимальный объем памяти по умолчанию, устанавливайте его не слишком большим, чтобы работа других рабочих нагрузок не ухудшилась.

В некоторых случаях рабочая нагрузка отчетов с разбивкой на страницы может стать недоступной. В такой ситуации для этой рабочей нагрузки на портале администрирования отображается состояние ошибки, а пользователи при отрисовке отчета получают сообщения о превышении времени ожидания. Чтобы устранить эту проблему, отключите эту рабочую нагрузку и снова включите ее.

## <a name="configure-workloads"></a>Настройка рабочих нагрузок

Вы можете максимально увеличить емкость доступных ресурсов, включая рабочие нагрузки, только если они будут использоваться. Изменяйте параметры памяти и другие параметры, только если значения по умолчанию не соответствуют требованиям к ресурсам емкости.

### <a name="to-configure-workloads-in-the-power-bi-admin-portal"></a>Настройка рабочих нагрузок на портале администрирования Power BI

1. Выберите емкость в разделе **Параметры емкости** > **Емкости Premium**.

1. В разделе **Дополнительно** разверните **Рабочие нагрузки**.

1. Включите одну или несколько рабочих нагрузок и задайте значения для параметра **Максимальный объем памяти** и других параметров.

1. Нажмите кнопку **Применить**.

### <a name="rest-api"></a>API-интерфейсы REST

Рабочие нагрузки можно включить и назначить емкости с помощью REST API [емкостей](https://docs.microsoft.com/rest/api/power-bi/capacities).

## <a name="monitoring-workloads"></a>Мониторинг рабочих нагрузок

[Приложения метрик емкости Power BI Premium](service-admin-premium-monitor-capacity.md) предоставляет метрики, связанные с наборами данных, потоками данных и отчетами с разбивкой на страницы, для мониторинга рабочих нагрузок, которые включены для ваших емкостей. 

## <a name="next-steps"></a>Дальнейшие действия

[Оптимизация емкостей Power BI Premium](service-premium-capacity-optimize.md)     
[Самостоятельная подготовка данных в Power BI с помощью потоков данных](service-dataflows-overview.md)   
[Сведения об отчетах с разбивкой на страницы в Power BI Premium](paginated-reports-report-builder-power-bi.md)   

Появились дополнительные вопросы? [Спросить в сообществе Power BI](http://community.powerbi.com/)