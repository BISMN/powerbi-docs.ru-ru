---
title: Создание связей и управление ими в Power BI Desktop
description: Создание связей и управление ими в Power BI Desktop
author: davidiseminger
manager: kfile
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-desktop
ms.topic: conceptual
ms.date: 04/19/2019
ms.author: davidi
LocalizationGroup: Model your data
ms.openlocfilehash: f2102ad654a056832f7890dc506acc99eb5ef26f
ms.sourcegitcommit: 60dad5aa0d85db790553e537bf8ac34ee3289ba3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/29/2019
ms.locfileid: "61312711"
---
# <a name="create-and-manage-relationships-in-power-bi-desktop"></a>Создание связей и управление ими в Power BI Desktop
При импорте нескольких таблиц вам, скорее всего, потребуется провести анализ данных из них всех. Связи между этими таблицами необходимы, чтобы точно вычислить результаты и отобразить правильные сведения в отчетах. Power BI Desktop значительно упрощает создание таких связей. Фактически в большинстве случаев вам не нужно ничего делать — функция автообнаружения сделает все автоматически. Однако в некоторых случаях может потребоваться создать связи вручную или внести некоторые изменения в полученные связи. В любом случае очень важно понимать связи в Power BI Desktop, а также способы их создания и изменения.

## <a name="autodetect-during-load"></a>Автообнаружение при загрузке
Если вы запрашиваете две или более таблиц в то же время, при загрузке данных Power BI Desktop пытается найти и создать связи для вас. Свойства "Кратность", "Направление кроссфильтрации" и "Активная" задаются автоматически. Power BI Desktop анализирует имена столбцов в запрашиваемых таблицах, чтобы определить, существуют ли потенциальные связи. Если это так, эти связи создаются автоматически. Если не удается определить Power BI Desktop с высоким уровнем достоверности совпадение, автоматически не создается связь. Вы по-прежнему можете использовать диалоговое окно "Управление связями" для создания и изменения связей.

## <a name="create-a-relationship-by-using-autodetect"></a>Создание связи с помощью автообнаружения
На вкладке **Главная** щелкните **Управление связями** \> **Автообнаружение**.

![](media/desktop-create-and-manage-relationships/automaticrelationship.gif)

## <a name="create-a-relationship-manually"></a>Создание связи вручную
1. На вкладке **Главная** щелкните **Управление связями** \> **Создать**.
2. В **Создание связи** диалоговое окно, в списке раскрывающемся списке первой таблицы выберите таблицу, затем выберите столбец, необходимо использовать в связи.
3. В списке раскрывающемся списке второй таблицы, выберите другую таблицу в связи, а затем выберите нужный столбец, вы хотите использовать и нажмите кнопку **ОК**.

![](media/desktop-create-and-manage-relationships/manualrelationship2.gif)

По умолчанию Power BI Desktop автоматически настраивает кратность (направление), направление кроссфильтрации "и" свойства Active для новой связи; Тем не менее при необходимости можно изменить параметры. Дополнительные сведения см. в разделе "Основные сведения о дополнительных параметрах" далее в этой статье.

Вы увидите сообщение об ошибке *один из столбцов должен содержать уникальные значения* Если ни одной из таблиц, выбранных для связи имеет уникальные значения. По крайней мере одна из таблиц, участвующих в связи, *должна* иметь уникальный список ключевых значений. Это стандартное требование для любых реляционных баз данных. 

Устранить эту проблему можно несколькими способами.

* Используйте функцию "Удалить повторяющиеся строки", чтобы получить столбец с уникальными значениями. Недостаток такого подхода в том, что при удалении повторяющихся строк часть данных теряется, хотя часто на дублирование ключей (строк) есть причины.
* Добавьте промежуточную таблицу, состоящую из списка отдельных ключевых значений модели, а затем свяжите ее с обоими исходными столбцами, участвующими в связи.

Дополнительные сведения см. в разделе [блога](https://blogs.technet.microsoft.com/cansql/2016/12/19/relationships-in-power-bi-fixing-one-of-the-columns-must-have-unique-values-error-message/).


## <a name="edit-a-relationship"></a>Изменение связи
1. На вкладке **Главная** щелкните **Управление связями**.
2. В диалоговом окне **Управление связями** выберите связь, а затем нажмите кнопку **Изменить**.

## <a name="configure-additional-options"></a>Настройка дополнительных параметров
При создании или изменении связи вы можете настроить дополнительные параметры. По умолчанию Дополнительные параметры настраиваются автоматически на основе наиболее подходящих значений, который может быть разным для каждой связи на основе данных в столбцах.

## <a name="cardinality"></a>Кратность
**Многие к одному (\*: 1)** - большинство общего, по умолчанию тип, который означает, что у столбца в одной таблице может быть более одного экземпляра значение и другие связанные таблицы, которую часто называют таблицей подстановки, есть только один экземпляр значения.

**Один к одному (1:1)** - столбец в этой таблице есть только один экземпляр определенного значения, и связанной таблицы также есть только один экземпляр определенного значения.

**Связи "многие ко многим"** . Составной модели можно установить связи многие ко многим между таблицами, которые удаляет требования для уникальных значений в таблицах. Также они позволяют обойтись без предыдущих обходных путей, таких как создание новых таблиц исключительно для образования связей. Дополнительные сведения см. в статье [Связи с кратностью "многие ко многим"](https://docs.microsoft.com/power-bi/desktop-many-to-many-relationships). 

Дополнительные сведения об изменении кратности см. в разделе "Общие сведения о дополнительных параметрах" далее в этой статье.

## <a name="cross-filter-direction"></a>Направление кроссфильтрации
**Оба** — наиболее распространенные направление по умолчанию, которое означает, что для фильтрации данных, обе таблицы обрабатываются так, как если бы они представляют одну таблицу. **Оба** хорошо работает с одной таблицы, которая имеет ряд таблиц подстановки, окружающие ее. Примером может служить таблица фактических данных по продажам с таблицей подстановки для отделов. Такая конфигурация часто называется схемой типа "звезда" (центральная таблица с несколькими таблицами подстановки). При наличии нескольких таблиц, у которых также есть таблицы подстановки (некоторые из которых являются общими), не следует использовать параметр "Двунаправленная". Продолжая предыдущий пример, предположим, что в этом случае также есть таблица бюджета, содержащая целевой бюджет для каждого отдела. Таблица отделов подключена к таблице продаж и таблице бюджета. Избегайте направления связи "Двунаправленная" для конфигурации такого вида.

**Единый** -фильтрация вариантов в подключенных таблицах выполняется в той таблице, где значения агрегируются. При импорте модели данных Power Pivot в Excel 2013 или более ранней версии все связи будут однонаправленными. 

Дополнительные сведения об изменении направления кроссфильтрации см. в разделе "Общие сведения о дополнительных параметрах" далее в этой статье.

## <a name="make-this-relationship-active"></a>Активировать связь
Если этот флажок установлен, связь служит в качестве активной связи по умолчанию. Если между двумя таблицами есть несколько связей, активная связь позволяет Power BI Desktop автоматически создавать визуализации, включающие обе таблицы.

Дополнительные сведения о том, когда нужно сделать определенную связь активной, см. в разделе "Общие сведения о дополнительных параметрах" далее в этой статье.

## <a name="understanding-relationships"></a>Основные сведения о связях
После соединения двух таблиц с помощью связи вы можете работать с данными в обеих таблицах так, будто они находятся в одной таблице, что позволяет не беспокоиться о связях или преобразовании таблиц в плоскую структуру перед их импортом. Во многих случаях Power BI Desktop может автоматически создавать связи, поэтому создавать эти связи самостоятельно необязательно. Однако если Power BI Desktop не может определить с высокой степенью достоверности, что связь между двумя таблицами существует, он не создает автоматически связи. В этом случае необходимо создать связи. 

Давайте разберем краткий учебник, чтобы лучше показать, как связи работают в Power BI Desktop.

>[!TIP]
>Этот урок можно пройти самостоятельно. Скопируйте таблицу ProjectHours ниже на лист Excel, выберите все ячейки и щелкните **Вставка** \> **Таблица**. В диалоговом окне **Создание таблицы** просто нажмите кнопку **ОК**. Затем в поле **Имя таблицы**введите **ProjectHours**. То же сделайте для таблицы CompanyProject. Затем вы можете импортировать данные, нажав кнопку **Получить данные** в Power BI Desktop. Выберите книгу и таблицы в качестве источника данных.

Первая таблица, ProjectHours, представляет собой карточки учета рабочего времени, в которых зафиксировано время работы пользователя над определенным проектом. 

**ProjectHours**

| **Ticket** | **SubmittedBy** | **Hours** | **Project** | **DateSubmit** |
| ---:|:--- | ---:|:--- | ---:|
| 1001 |Brewer, Alan |22 |Синий |1.01.2013 |
| 1002 |Brewer, Alan |26 |Красный |1.02.2013 |
| 1003 |Ito, Shu |34 |Желтый |4.12.2012 |
| 1004 |Brewer, Alan |13 |Оранжевый |1.2.2012 |
| 1005 |Bowen, Eli |29 |Фиолетовый |1.10.2013 |
| 1006 |Bento, Nuno |35 |Зеленый |1.02.2013 |
| 1007 |Hamilton, David |10 |Желтый |1.10.2013 |
| 1008 |Han, Mu |28 |Оранжевый |2.01.2012 |
| 1009 |Ito, Shu |22 |Фиолетовый |1.02.2013 |
| 1010 |Bowen, Eli |28 |Зеленый |1.10.2013 |
| 1011 |Bowen, Eli |9 |Синий |15.10.2013 |

Вторая таблица, CompanyProject, — это список проектов с назначенным приоритетом: A, B или C. 

**CompanyProject**

| **ProjName** | **Priority** |
| --- | --- |
| Синий |A |
| Красный |B |
| Зеленый |C |
| Желтый |C |
| Фиолетовый |B |
| Оранжевый |C |

Обратите внимание, что каждая таблица содержит столбец проекта. Имена столбцов немного отличаются, но значения выглядят одинаковыми. Это важно, и мы свяжемся с его в ближайшее время.

После импорта двух таблиц в модель создадим отчет. Первое, что мы хотим получить, — количество часов, выделенное проектам по приоритету, поэтому мы выберем **Priority** и **Hours** из раздела "Поля".

 ![](media/desktop-create-and-manage-relationships/candmrel_reportfiltersnorel.png)

Если взглянуть на нашу таблицу на холсте отчета, можно увидеть количество часов **256,00** для каждого проекта, а также итоговое значение. Очевидно, что это неверно. Почему? Потому что мы не можем вычислить сумму значений из одной таблицы (Hours в таблице Project), разделенных по значениям из другой таблицы (Priority в CompanyProject), без связи между этими двумя таблицами.

Поэтому давайте создадим связь между этими двумя таблицами.

Помните, мы видели в обеих таблицах столбцы с именем проекта и похожими значениями? Мы используем их для создания связи между нашими таблицами.

Почему именно эти столбцы? Если рассмотреть столбец Project в таблице ProjectHours, мы увидим такие значения, как Синий, Красный, Желтый, Оранжевый и т. д. Фактически несколько строк имеют одинаковое значение. На самом деле у нас множество значений цветов для столбца Project.

Если мы рассмотрим столбец ProjName в таблице CompanyProject, мы увидим, что в нем используется только одно из значений цветов для проекта. На самом деле каждое значение цвета в этой таблице уникально, и это важно, поскольку мы можем создать связь между этими двумя таблицами. Это будет связь "многие к одному". В такой связи хотя бы один столбец в одной из таблиц должен содержать уникальные значения. Для некоторых связей существуют дополнительные параметры, и мы рассмотрим их позже. Сейчас мы попробуем создать связь между столбцами Project в каждой из двух таблиц.

### <a name="to-create-the-new-relationship"></a>Создание связи
1. Щелкните **Управление связями**.
2. В **управление связями**, нажмите кнопку **New** открыть **Создание связи** диалоговое окно, где можно выбрать таблицы, столбцы и любые дополнительные параметры для нашей связь.
3. В первой таблице выберите **ProjectHours**, а затем выберите столбец **Project** . Это сторона связи "многие".
4. Во второй таблице выберите **CompanyProject**, а затем выберите столбец **ProjName** . Это сторона связи "один". 
5. Нажмите кнопку **ОК** в диалоговых окнах **Создание связи** и **Управление связями** .

![](media/desktop-create-and-manage-relationships/candmrel_create_compproj.png)

В целях обучения вы создали связь трудным способом. Вы могли просто нажать кнопку на кнопке "Автообнаружение" в диалоговом окне Управление связями. То есть, автообнаружение уже сделало бы все автоматически при загрузке данных, если бы у обоих столбцов было одно и то же имя. Но это же слишком просто, не так ли?

Теперь снова рассмотрим таблицу на холсте отчета.

 ![](media/desktop-create-and-manage-relationships/candmrel_reportfilterswithrel.png)

Теперь все выглядит гораздо лучше, не правда ли?

Когда мы Суммируем часы по приоритету, Power BI Desktop ищет каждый экземпляр уникального значения цвета в таблице подстановки CompanyProject, затем найдет каждый экземпляр каждого из этих значений в таблице CompanyProject и вычислит сумму для каждого уникального значения .

Это было просто, на самом деле, благодаря Автообнаружению, даже отсутствует для этого делать.

## <a name="understanding-additional-options"></a>Общие сведения о дополнительных параметрах
При создании связи, либо с помощью автообнаружения или вручную, Power BI Desktop автоматически настраивает дополнительные параметры, на основе данных в таблицах. Вы можете настроить эти дополнительные параметры связи в нижней части диалогового окна "Создание и изменение связи".

 ![](media/desktop-create-and-manage-relationships/candmrel_advancedoptions2.png)

Как мы уже говорили, обычно они задаются автоматически, и вам не нужно их изменять. Но в некоторых ситуациях может потребоваться настроить дополнительные параметры самостоятельно.

## <a name="automatic-relationship-updates"></a>Связь автоматического обновления

Вы можете управлять как рассматривает Power BI и автоматически корректирует связей в отчетах и моделях. Чтобы указать, как Power BI обрабатывает параметры связи, выберите **файл > Параметры и настройки > Параметры** Power BI Desktop, а затем нажмите **загрузки данных** в левой области. Появятся параметры для **связи**.

 ![Параметры связи](media/desktop-create-and-manage-relationships/relationships-options-01.png)

Существует три варианта, которые можно выбрать и включить. 

Первый вариант — *импортировать связи из источников данных*, и она будет выбрана по умолчанию. При выборе Power BI проверяет наличие связи, определенные в источнике данных, такие как внешний ключ / первичного ключа связи в хранилище данных. Если такие отношения существуют, они участвуют в зеркальном отображении в модель данных Power BI при первоначальной загрузке данных. Этот параметр позволяет быстро начать работу с моделью, а не требуется найти, или определить эти связи самостоятельно.

Второй вариант — *обновления или удаления связей при обновлении данных*, и оно отключено по умолчанию. Если выбран (включено, установив флажок рядом с полем), Power BI проверяет наличие изменений в связи источника данных при обновлении набора данных. Если эти связи, изменяются или удаляются, Power BI отражает эти изменения в свою собственную модель данных, обновлении или удалении их в соответствии.

> [!WARNING]
> Если используется безопасность на уровне строк, основанный на определенные связи, не рекомендуется выбрать второй вариант, *обновления или удаления связей при обновлении данных*. Если отношение удаляется, что настройки RLS зависят, модель может стать менее защищенным. 

Третий вариант — *автоматически искать новые связи после загрузки данных*, который описан в [Автообнаружение при загрузке](#autodetect-during-load) раздел, ранее в этой статье. 


## <a name="future-updates-to-the-data-require-a-different-cardinality"></a>Последующие обновления данных требуют другой кратности
Обычно Power BI Desktop может автоматически определить лучшую кратность для связи. Если вам необходимо переопределить автоматические настройки, поскольку известно, что данные будут изменяться в будущем, можно выбрать нужное значение в элементе управления "Кратность". Рассмотрим пример, где нам необходимо выбрать другую кратность.

Таблица CompanyProjectPriority ниже — это список всех проектов компании и их приоритетов. Таблица ProjectBudget — это набор проектов, для которых был утвержден бюджет.

**ProjectBudget**

| **Approved Projects** | **BudgetAllocation** | **AllocationDate** |
|:--- | ---:| ---:|
| Синий |40 000 |1.12.2012 |
| Красный |100 000 |1.12.2012 |
| Зеленый |50 000 |1.12.2012 |

**CompanyProjectPriority**

| **Project** | **Priority** |
| --- | --- |
| Синий |A |
| Красный |B |
| Зеленый |C |
| Желтый |C |
| Фиолетовый |B |
| Оранжевый |C |

Мы создадим связь между столбцом Project в таблице CompanyProjectPriority и столбцом ApprovedProjects в таблице ProjectBudget следующим образом:

 ![](media/desktop-create-and-manage-relationships/candmrel_create_compproj_appproj2.png)

Кратность автоматически будет установлена как "один к одному" (1:1), а направление кроссфильтрации — "двунаправленное" (как и показано). Это происходит, потому что для Power BI Desktop наилучшее сочетание двух таблиц выглядит следующим образом:

| **Project** | **Priority** | **BudgetAllocation** | **AllocationDate** |
|:--- | --- | ---:| ---:|
| Синий |A |40 000 |1.12.2012 |
| Красный |B |100 000 |1.12.2012 |
| Зеленый |C |50 000 |1.12.2012 |
| Желтый |C |<br /> |<br /> |
| Фиолетовый |B |<br /> |<br /> |
| Оранжевый |C |<br /> |<br /> |

Между двумя таблицами существует связь "один к одному", поскольку в столбце Project объединенной таблицы отсутствуют повторяющиеся значения. Столбец Project является однозначным, так как каждое значение встречается только один раз, поэтому строки из двух таблиц можно объединить напрямую без дублирования.

Однако предположим, что вы знаете, что данные изменятся при следующем обновлении. Обновленная версия таблицы ProjectBudget теперь содержит дополнительные строки для синего и красного цвета:

**ProjectBudget**

| **Approved Projects** | **BudgetAllocation** | **AllocationDate** |
| --- | ---:| ---:|
| Синий |40 000 |1.12.2012 |
| Красный |100 000 |1.12.2012 |
| Зеленый |50 000 |1.12.2012 |
| Синий |80 000 |1.06.2013 |
| Красный |90 000 |1.06.2013 |

 Это означает, что наилучшее сочетание двух таблиц теперь выглядит следующим образом: 

| **Project** | **Priority** | **BudgetAllocation** | **AllocationDate** |
| --- | --- | ---:| ---:|
| Синий |A |40 000 |1.12.2012 |
| Красный |B |100 000 |1.12.2012 |
| Зеленый |C |50 000 |1.12.2012 |
| Желтый |C |<br /> |<br /> |
| Фиолетовый |B |<br /> |<br /> |
| Оранжевый |C |<br /> |<br /> |
| Синий |A |80 000 |6.1.2013 |
| Красный |B |90 000 |6.1.2013 |

В этой новой объединенной таблице столбец Project содержит повторяющиеся значения. У двух исходных таблиц не будет связи "один к одному" после обновления таблицы. Так как мы знаем, что будущие изменения приведут к появлению повторяющихся значений в столбце Project, нам нужно выбрать кратность "многие к одному" (\*:1). При этом сторона "многие" — это ProjectBudget, а сторона "один" — CompanyProjectPriority.

## <a name="adjusting-cross-filter-direction-for-a-complex-set-of-tables-and-relationships"></a>Настройка направления кроссфильтрации для сложного набора таблиц и связей
Для большинства связей направление кроссфильтрации имеет значение "Двунаправленная". Однако в некоторых редких обстоятельствах вам могут потребоваться значения, отличные от настроек по умолчанию, например при импорте модели из более старой версии Power Pivot, где все связи однонаправленные. 

Параметр "Двунаправленная" позволяет Power BI Desktop обрабатывать все аспекты связанных таблиц так, будто они представляют одну таблицу. Тем не менее в некоторых ситуациях Power BI Desktop не может задать направление "Двунаправленная" и одновременно сохранить однозначный набор значений по умолчанию для отчетов. Если двунаправленное направление кроссфильтрации не задано, обычно это объясняется тем, что иначе возникла бы неоднозначность. Если настройка по умолчанию для параметра кроссфильтрации не работает в вашей ситуации, попробуйте установить его на определенную таблицу или выбрать значение "Двунаправленная".

Однонаправленная кроссфильтрация подходит для многих ситуаций. Фактически, если вы импортировали модель из Power Pivot в Excel 2013 или более ранней версии, все связи будут однонаправленными. Однонаправленная связь означает, что фильтрация вариантов в подключенных таблицах выполняется в той таблице, где данные агрегируются. В некоторых случаях понять кроссфильтрацию довольно сложно, так что давайте рассмотрим пример.

 ![](media/desktop-create-and-manage-relationships/candmrel_singledircrossfiltering.png)

Если вы используете однонаправленную кроссфильтрацию и создаете отчет, суммирующий часы проекта, вы можете выбрать суммирование (или фильтрацию) по CompanyProject, Priority или CompanyEmployee, City. Если же вам нужно подсчитать число сотрудников по проектам (менее типичный вопрос), это не сработает. Вы получите столбец с одинаковыми значениями. В примере ниже направление кроссфильтрации обеих связей задано как однонаправленное — к таблице ProjectHours:

 ![](media/desktop-create-and-manage-relationships/candmrel_repcrossfiltersingle.png)

Спецификация фильтра будет передаваться от CompanyProject к CompanyEmployee (как показано на рисунке ниже), но он не будут передаваться в CompanyEmployee. Но если выбрать двунаправленную кроссфильтрацию, это будет работать. Параметр "Двунаправленная" направляет фильтрацию к Employee.

 ![](media/desktop-create-and-manage-relationships/candmrel_bidircrossfiltering.png)

Если для кроссфильтрации выбран параметр "Двунаправленная", наш отчет будет отображаться правильно:

 ![](media/desktop-create-and-manage-relationships/candmrel_repcrossfilterbi.png)

Кроссфильтрация в обоих направлениях хорошо работает для связей между таблицами, которые похожи на шаблон выше. Чаще всего такую конфигурацию называют схемой "звезда":

 ![](media/desktop-create-and-manage-relationships/candmrel_crossfilterstarschema.png)

Направление кроссфильтрации плохо подходит для более общего случая, который часто встречается в базах данных, как показано на этой диаграмме:

 ![](media/desktop-create-and-manage-relationships/candmrel_crossfilterwithloops.png)

При наличии подобного шаблона с циклами кроссфильтрация может создать неоднозначный набор связей. Например, если просуммировать поле из таблицы X и затем выбрать фильтрацию по какому-либо полю в таблице Y, будет неясно, как фильтр должен перемещаться: по верхней таблице или по нижней. Типичный пример шаблона этого типа: таблица X — таблица продаж с фактическими данными, а таблица Y — с данными бюджета. Еще пример: таблицы в середине являются таблицами подстановки, которыми пользуются две таблицы, например таблица подразделений и таблица регионов. 

Как и для активных и неактивных связей, Power BI Desktop не позволит установить двунаправленную связь, если она вызовет неоднозначность в отчетах. С этим можно справиться несколькими способами. Вот два самых типичных.

* Удалите или отметьте связи как неактивные, чтобы избежать неоднозначности. Затем вы сможете установить для связи двунаправленную кроссфильтрацию.
* Внесите таблицу дважды (с другим именем во второй раз), чтобы исключить циклы. Тогда шаблон связей будет похож на схему "звезда". В схеме типа "звезда" все связи можно назначить двунаправленными.

## <a name="wrong-active-relationship"></a>Неверная активная связь
Когда Power BI Desktop автоматически создает связи, иногда между двумя таблицами встречается несколько связей. В этом случае только одна из них должна быть активной. Активная связь служит связью по умолчанию, чтобы при выборе полей из двух различных таблиц Power BI Desktop мог автоматически создать визуализацию. Однако в некоторых случаях автоматически может быть выбрана неверная связь. В диалоговом окне "Управление связями" можно сделать связь активной или неактивной. Кроме того, сделать связь активной можно в диалоговом окне "Изменение связи". 

Чтобы гарантировать, что существует связь по умолчанию, Power BI Desktop допускает только одну активную связь между двумя таблицами в определенный момент времени. Поэтому сначала необходимо установить текущую связь как неактивную, а затем задать связь, которая будет активной.

Рассмотрим следующий пример. Первая таблица — ProjectTickets, а вторая таблица — EmployeeRole.

**ProjectTickets**

| **Ticket** | **OpenedBy** | **SubmittedBy** | **Hours** | **Project** | **DateSubmit** |
| ---:|:--- |:--- | ---:|:--- | ---:|
| 1001 |Perham, Tom |Brewer, Alan |22 |Синий |1.01.2013 |
| 1002 |Roman, Daniel |Brewer, Alan |26 |Красный |1.02.2013 |
| 1003 |Roth, Daniel |Ito, Shu |34 |Желтый |4.12.2012 |
| 1004 |Perham, Tom |Brewer, Alan |13 |Оранжевый |1.2.2012 |
| 1005 |Roman, Daniel |Bowen, Eli |29 |Фиолетовый |1.10.2013 |
| 1006 |Roth, Daniel |Bento, Nuno |35 |Зеленый |1.02.2013 |
| 1007 |Roth, Daniel |Hamilton, David |10 |Желтый |1.10.2013 |
| 1008 |Perham, Tom |Han, Mu |28 |Оранжевый |2.01.2012 |
| 1009 |Roman, Daniel |Ito, Shu |22 |Фиолетовый |1.02.2013 |
| 1010 |Roth, Daniel |Bowen, Eli |28 |Зеленый |1.10.2013 |
| 1011 |Perham, Tom |Bowen, Eli |9 |Синий |15.10.2013 |

**EmployeeRole**

| **Employee** | **Role** |
| --- | --- |
| Bento, Nuno |Project Manager |
| Bowen, Eli |Project Lead |
| Brewer, Alan |Project Manager |
| Hamilton, David |Project Lead |
| Han, Mu |Project Lead |
| Ito, Shu |Project Lead |
| Perham, Tom |Project Sponsor |
| Roman, Daniel |Project Sponsor |
| Roth, Daniel |Project Sponsor |

Фактически здесь две связи. Одна — между SubmittedBy в таблице ProjectTickets и Employee в таблице EmployeeRole, а другая — между OpenedBy в таблице ProjectTickets и Employee в таблице EmployeeRole.

 ![](media/desktop-create-and-manage-relationships/candmrel_activerelview.png)

Если мы добавим обе связи в модель (сначала OpenedBy), в диалоговом окне "Управление связями" будет показано, что связь OpenedBy активна:

 ![](media/desktop-create-and-manage-relationships/candmrel_managerelactive.png)

Теперь если мы создадим отчет, использующий поля Role и Employee из таблицы EmployeeRole и поле Hours из ProjectTickets в визуализации таблицы на холсте отчета, мы увидим, что только спонсоров проекта, так как они только открывали билет проекта.

 ![](media/desktop-create-and-manage-relationships/candmrel_repcrossfilteractive.png)

Мы можем изменить активную связь и получить SubmittedBy вместо OpenedBy. В окне "Управление связями" отмените выбор связи ProjectTickets(OpenedBy) с EmployeeRole(Employee), а затем выберите связь Project Tickets(SubmittedBy) с EmployeeRole(Employee).

![](media/desktop-create-and-manage-relationships/candmrel_managerelactivesubmittedby.png)

## <a name="see-all-of-your-relationships-in-relationship-view"></a>Просмотр всех связей в представлении связей
Иногда модель содержит несколько таблиц и сложные связи между ними. Представление связей в Power BI Desktop показывает все связи в модели, их направление и кратность, используя легкие для понимания, настраиваемые диаграммы. Дополнительные сведения см. в разделе [Представление связей в Power BI Desktop](desktop-relationship-view.md).

