---
title: Работа с статистические функции (sum, average и т. д.) в службе Power BI
description: Узнайте, как изменить статистическую обработку в диаграмме (сумма, среднее, максимум и т. д.) в службе Power BI.
author: mgblythe
manager: kfile
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-service
ms.topic: conceptual
ms.date: 05/03/2019
ms.author: mblythe
ms.custom: seodec18
LocalizationGroup: Reports
ms.openlocfilehash: 7cee05df6a7d13e18bc31bc1a1f34a5f89711c0d
ms.sourcegitcommit: 60dad5aa0d85db790553e537bf8ac34ee3289ba3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/29/2019
ms.locfileid: "65710681"
---
# <a name="work-with-aggregates-sum-average-and-so-on-in-the-power-bi-service"></a>Работа с статистические функции (sum, average и т. д.) в службе Power BI

## <a name="what-is-an-aggregate"></a>Что такое статистическое выражение?

Иногда над данными нужно выполнить математическую операцию с объединением значений. Математические операции может быть сумма, среднее, максимум, число и т. д. Объединение значений данных, называется *статистической обработки*. В результате таких операций появляются *статистические выражения*.

При создании визуализаций в службе Power BI и приложении Power BI Desktop для данных может выполняться статистическое вычисление. Часто этот вариант подходит, но в некоторых случаях, возможно, потребуется обработать значения по-другому.  Например, для суммирования и получения среднего значения применяются разные подходы. Для управления и измените статистическую функцию, используемые в визуализации Power BI несколькими способами.

Во-первых давайте рассмотрим данные *типы* потому, что тип данных определяет способ и необходимость, Power BI можно объединить.

## <a name="types-of-data"></a>Типы данных

В большинстве наборов данных содержится более одного типа данных. На самом базовом уровне данные, быть числовыми или нет. Power BI можно статистической обработки числовых данных, с помощью сумма, среднее, количество, минимум, отклонение и многое другое. Служба может даже собирать текстовых данных, часто называют *категориальные* данных. Если вы пытаетесь выполнить статистическое вычисление поле категории, поместив его в контейнер только числовые как **значения** или **подсказки**, Power BI будет подсчитать количество экземпляров каждой категории или количество уникальных экземпляров каждого Категория. Специальные типы данных, такие как даты, имеют несколько собственных статистических параметров: самая первая, последняя, первая и последняя.

В следующем примере:

- Столбцы **Units Sold** (Продано единиц) и **Manufacturing Price** (Цена производителя) содержат числовые данные.

- Столбцы **Segment** (Сегмент), **Country** (Страна), **Product** (Продукт), **Month** (Месяц), и **Month Name** (Название месяца) содержат категориальные данные.

   ![Снимок экрана: пример набора данных.](media/service-aggregates/power-bi-aggregate-chart.png)

При создании визуализации в Power BI, служба будет выполнять статистическую обработку числовых полей (по умолчанию используется *сумма*) в поле категории.  Например «количество проданного товара ***по продукту***«, «количество проданного товара ***по месяцам***"и «производство цена ***по сегменту***«. Power BI ссылается на некоторые числовые значения, как **меры**. Легко обнаружить меры в редакторе отчетов Power BI — **поля** перечислены меры с символом ∑ рядом с ними. См. в разделе [редактора отчетов... Ознакомьтесь с образцом](service-the-report-editor-take-a-tour.md) Дополнительные сведения.

![Снимок экрана Power BI с помощью списка полей, вызванной.](media/service-aggregates/power-bi-aggregate-fields.png)

## <a name="why-dont-aggregates-work-the-way-i-want-them-to"></a>Почему статистические выражения не работают так, как мне нужно?

Работа статистических выражений в Power BI служба может вызывать трудности. Возможно, что у вас есть числового поля и Power BI не позволяет изменить статистическое выражение. Или, например, вы не хотите применять статистическое выражение к полю "год" — вам просто нужно подсчитать количество экземпляров.

Как правило основную причину проблемы является определение поля в наборе данных. Может быть владельцем набора данных определяется поле как текст, и это объясняет, почему невозможно суммировать или среднем Power BI. К сожалению, [категорию поля может изменить только владелец набора данных](desktop-measures.md). Поэтому если у вас есть права владельца для набора данных, как в Desktop или программа, используемая для создания набора данных (например, Excel), можно решить данную проблему. В противном случае потребуется обратиться к владельцу набора данных за помощью.  

Специальный раздел в конце этой статьи [ **рекомендации и устранение неполадок**](#considerations-and-troubleshooting). Он предоставляет советы и рекомендации. Если вы не нашли ответ на свой вопрос там, отправьте свой вопрос в [форуме сообщества Power BI](http://community.powerbi.com). Вы получите оперативный ответ непосредственно от команды Power BI.

## <a name="change-how-a-numeric-field-is-aggregated"></a>Изменение вычисления числового поля

Предположим, есть диаграмма, в которой суммируются проданные единицы различных продуктов, но вместо суммы требуется получить среднее значение.

1. Создание **гистограмма с группировкой** , использующий меры и категории. В этом примере мы используем Units Sold by Product (Продано единиц по продукту).  По умолчанию Power BI создает диаграмму, которая суммирует число проданных единиц (перетащите меру в **значение** также) для каждого продукта (перетащите category в **оси** хорошо).

   ![Снимок экрана: диаграммы, панели визуализаций и списке полей с суммой вызваны.](media/service-aggregates/power-bi-aggregate-sum.png)

1. В **визуализации** панели, щелкните правой кнопкой мыши меру и выберите нужный тип вычисления, вам потребуется. В этом случае мы выбираем **среднее**. Если вы не видите статистической обработке см [ **рекомендации и устранение неполадок** ](#considerations-and-troubleshooting) раздел.

   ![Снимок экрана агрегатные списка со средним выбранного и вызова.](media/service-aggregates/power-bi-aggregate-average.png)

   > [!NOTE]
   > Параметры, доступные в раскрывающемся списке будут зависеть от 1) выбранного поля и (2 как владелец набора данных по категориям этого поля.

1. Теперь для вашей визуализации выполнено статистическое вычисление среднего значения.

   ![Снимок экрана: диаграмма, теперь отображается среднее из количество проданного товара по продукту.](media/service-aggregates/power-bi-aggregate-average-2.png)

## <a name="ways-to-aggregate-your-data"></a>Способы статистического вычисления для данных

Некоторые параметры, которые могут быть доступны для статистической обработки поля:

- **Не суммировать**. Этот параметр выбран Power BI обрабатывает каждое значение в этом поле отдельно и не суммировать их. Используйте этот параметр, при наличии числового столбца идентификатора, не следует суммировать службы.

- **Сумма**. Все значения в этом поле суммируются.

- **Среднее**. Вычисляется среднее арифметическое значений.

- **Минимум**. Отображается самое низкое значение.

- **Максимум**. Отображается самое высокое значение.

- **Количество (не пустых).** Подсчитывает количество значений в этом поле, не пустой.

- **Количество (уникальных).** Подсчитывается количество уникальных значений в этом поле.

- **Стандартное отклонение.**

- **Отклонение**.

- **Медиана**.  Показывает значение медианы (среднее). Это значение, число элементов выше и ниже которого одинаково.  Если медиан две, Power BI вычисляет их среднее значение.

Например, эти данные:

| Страна | Объем |
|:--- |:--- |
| США |100 |
| Соединенное Королевство |150 |
| Канада |100 |
| Германия |125 |
| Франция | |
| Япония |125 |
| Австралия |150 |

выдадут следующие результаты:

- **Не суммировать**: каждое значение отображается отдельно

- **Сумма**: 750

- **Среднее**: 125

- **Максимум**:  150

- **Минимум**: 100

- **Количество (не пустых):** 6

- **Количество (различных):** 4

- **Стандартное отклонение:** 20,4124145...

- **Отклонение:** 416,666...

- **Медиана:** 125

## <a name="create-an-aggregate-using-a-category-text-field"></a>Создание статистического вычисления с использованием категориального (текстового) поля

Можно выполнять статистическое вычисление и для нечисловых полей. Например, существующее поле с названия продукта можно добавить в качестве значения и задать для него выражение **Количество**, **Количество уникальных**, **Первый** или **Последний**.

1. Перетащите **продукта** в поле **значения** хорошо. **Значения** обычно используется для числовых полей. Power BI распознает, что это поле представляет собой текстовое поле, задает для статистического вычисления **не суммировать**и появится таблица с одним столбцом.

   ![Снимок экрана: поле Product в значениях хорошо.](media/service-aggregates/power-bi-aggregate-value.png)

1. Если изменить статистическую обработку по умолчанию **не суммировать** для **количество уникальных**, Power BI подсчитает количество разных продуктов. В этом случае существует четыре.
  
   ![Снимок экрана счетчик различных продуктов.](media/service-aggregates/power-bi-aggregate-count.png)

1. Если изменить функцию агрегирования на **Количество**, Power BI подсчитает общее количество. В этом случае существует семь записей для **продукта**.

   ![Снимок экрана количество продуктов.](media/service-aggregates/power-bi-aggregate-count-2.png)

1. Перетащив то же поле (в данном случае **продукта**) в **значения** и оставив статистическое вычисление по умолчанию **не суммировать**, Power BI разбивает количественные показатели по продукт.

   ![Снимок экрана продукта и количество продуктов.](media/service-aggregates/power-bi-aggregate-final.png)

## <a name="considerations-and-troubleshooting"></a>Рекомендации и устранение неполадок

Вопрос.  Почему не отображается параметр **Не суммировать**?

Ответ.  Выбранное поле, скорее всего, является вычисляемой или дополнительной мерой, созданной в Excel или [Power BI Desktop](desktop-measures.md). Каждая вычисляемая мера имеет собственную жестко заданную формулу. Невозможно изменить статистической обработки, которые использует Power BI. Например если это выражение "Сумма", выполнять можно только суммирование. **Поля** представлен список *вычисляемые меры* с символом калькулятора.

Вопрос.  Мое поле **является** числовым. Почему доступны только варианты **Количество** и **Количество различных объектов**?

Ответ 1.  Вероятным объяснением является то, что владелец набора данных *не* классифицировать поля как число. Например, если набор данных имеет **год** поле, владелец набора данных может категоризировать значение в виде текста. Более вероятно, что Power BI будет считаться **год** поля (например, количество человек, родившихся в 1974 г). Это менее вероятно, что Power BI будет сумма или среднее его. Если вы являетесь владельцем, можно открыть набор данных в Power BI Desktop и использовать **моделирования** tab, чтобы изменить тип данных.

Ответ 2. Если поле имеет отображается значок калькулятора, значит это *вычисляемой мерой*. Каждая вычисляемая мера имеет собственную жестко заданную формулу, можно изменить только владелец набора данных. Вычисление, которое использует Power BI может быть простым статистическим выражением, например среднее или sum. Также может что-то более сложен, например «процент вклада в родительскую категорию» или «нарастающий итог с начала года». Power BI не будет сумма или среднее значение результатов. Вместо этого он будет просто пересчитать (с использованием жестко заданную формулу) для каждой точки данных.

Ответ 3.  Еще один вариант: вы случайно поместили поле в *контейнер*, который допускает только категориальные значения.  В этом случае единственным доступными параметрами будут "Количество" и "Число разных элементов".

Ответ 4.  А четвертый вариант —, что вы используете поле для оси. Например, на оси линейчатой диаграммы Power BI отображает одну панель для каждого уникального значения. Значения полей в этом случае вообще не вычисляются.

>[!NOTE]
>Исключением из этого правила являются точечные диаграммы, для которых *требуются* вычисленные значения для осей X и Y.

Вопрос.  Почему я не могу агрегировать текстовые поля для источников данных SQL Server Analysis Services?

Ответ.  С активными подключениями к многомерным моделям SQL Server Analysis Services невозможно выполнять агрегирование на стороне клиента, включая определение первого, последнего, среднего, минимального, максимального и суммарного значений.

Вопрос.  Я использую точечную диаграмму и хочу, чтобы поле *не* вычислялось.  Как это сделать?

Ответ.  Добавьте поле в контейнер **Сведения**, но не в контейнеры осей X и Y.

Вопрос.  Когда я добавляю числовые поля в визуализацию, большинство полей по умолчанию суммируются, но для некоторых по умолчанию вычисляется среднее значение или количество либо выполняется другая операция.  Почему статистическое выражение по умолчанию не всегда одинаковое?

Ответ.  Владельцы наборов данных можно задать формирования сводных данных по умолчанию для каждого поля. Если вы являетесь владельцем набора данных, измените суммирование по умолчанию **моделирования** вкладке Power BI Desktop.

Вопрос.  Я владелец набора данных и хочу, чтобы для поля никогда не выполнялось агрегирование.

Ответ.  В Power BI Desktop на вкладке **Моделирование** установите для параметра **Тип данных** значение **Текст**.

Вопрос.  Я не вижу **не суммировать** как параметр в раскрывающемся списке.

Ответ.  Попробуйте удалить поле, а затем добавить его снова.

Появились дополнительные вопросы? [Ответы на них см. в сообществе Power BI.](http://community.powerbi.com/)